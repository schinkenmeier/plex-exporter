var Dn=Object.defineProperty;var $=(e,t)=>()=>(e&&(t=e(e=0)),t);var Ne=(e,t)=>{for(var n in t)Dn(e,n,{get:t[n],enumerable:!0})};function ee(e){Object.assign(Ge,e),Pn.forEach(t=>t(Ge))}var Ge,Pn,E,J=$(()=>{Ge={view:"movies",movies:[],shows:[],facets:{},filtered:[],cfg:{}},Pn=new Set,E=()=>Ge});function k(e,t,n){let r=document.createElement(e);return t&&(r.className=t),n!=null&&(r.textContent=n),r}var I,Be=$(()=>{I=(e,t=document)=>t.querySelector(e)});function Pt(e,t,n=864e5){try{let r=te+e,o={value:t,timestamp:Date.now(),ttl:n};localStorage.setItem(r,JSON.stringify(o)),jn()}catch(r){if(r.name==="QuotaExceededError"){Ht();try{let o=te+e,a={value:t,timestamp:Date.now(),ttl:n};localStorage.setItem(o,JSON.stringify(a))}catch{}}}}function jt(e){try{let t=te+e,n=localStorage.getItem(t);if(!n)return null;let r=JSON.parse(n);if(typeof r.timestamp!="number"||typeof r.ttl!="number")return localStorage.removeItem(t),null;let o=Date.now();return r.timestamp+r.ttl<o?(localStorage.removeItem(t),null):r.value}catch{return null}}function Rt(){try{Object.keys(localStorage).forEach(t=>{t.startsWith(te)&&localStorage.removeItem(t)})}catch{}}function $e(){try{let e=Object.keys(localStorage),t=Date.now(),n=0;e.forEach(r=>{if(r.startsWith(te))try{let o=JSON.parse(localStorage.getItem(r));o.timestamp+o.ttl<t&&(localStorage.removeItem(r),n++)}catch{localStorage.removeItem(r),n++}}),n>0}catch{}}function Ze(){try{let t=Object.keys(localStorage).filter(s=>s.startsWith(te)),n=Date.now(),r=0,o=0,a=0;return t.forEach(s=>{let i=localStorage.getItem(s);r+=i.length*2;try{let c=JSON.parse(i);c.timestamp+c.ttl>=n?o++:a++}catch{a++}}),{totalEntries:t.length,validEntries:o,expiredEntries:a,totalSize:r,totalSizeMB:(r/1024/1024).toFixed(2)}}catch{return null}}function jn(){try{let e=Ze();e&&e.totalSize>5242880&&Ht(.3)}catch{}}function Ht(e=.3){try{let t=Object.keys(localStorage),n=[];t.forEach(o=>{if(o.startsWith(te))try{let a=JSON.parse(localStorage.getItem(o));n.push({key:o,timestamp:a.timestamp})}catch{n.push({key:o,timestamp:0})}}),n.sort((o,a)=>o.timestamp-a.timestamp);let r=Math.ceil(n.length*e);for(let o=0;o<r;o++)localStorage.removeItem(n[o].key)}catch{}}var te,Rn,Qe=$(()=>{te="plex_cache_";Rn=null;typeof window!="undefined"&&typeof window.document!="undefined"&&window===globalThis&&($e(),Rn=setInterval($e,5*60*1e3))});async function et(e,t=2,n=!0){if(n){let o=jt(e);if(o!==null)return o}let r=null;for(let o=0;o<=t;o++){try{let a=await fetch(e,{cache:"no-store"});if(a&&a.ok){let s=await a.json();return n&&s&&Pt(e,s,Hn),s}if(a&&a.status===404)return null;r=new Error(`HTTP ${a.status}: ${a.statusText}`)}catch(a){r=a}if(o<t){let a=Math.min(1e3*Math.pow(2,o),5e3);await new Promise(s=>setTimeout(s,a))}}return null}function On(e){try{let t=document.getElementById(e);if(t&&t.textContent)return JSON.parse(t.textContent)}catch{}return null}function Vn(e){try{let t=window.__PLEX_EXPORTER__;return(t&&Array.isArray(t[e])?t[e]:null)||null}catch{return null}}function Un(e){try{return(Array.isArray(window[e])?window[e]:null)||null}catch{return null}}async function Ot(e,t){let n=await et(e);if(Array.isArray(n)&&n.length)return de(t==null?void 0:t.label,`primary:${e}`),n;if(t!=null&&t.embedId){let r=On(t.embedId);if(Array.isArray(r)&&r.length)return de(t==null?void 0:t.label,`embedded:${t.embedId}`),r}if(t!=null&&t.exportKey){let r=Vn(t.exportKey);if(Array.isArray(r)&&r.length)return de(t==null?void 0:t.label,`globalBag:${t.exportKey}`),r}if(t!=null&&t.globalVar){let r=Un(t.globalVar);if(Array.isArray(r)&&r.length)return de(t==null?void 0:t.label,`window:${t.globalVar}`),r}for(let r of(t==null?void 0:t.altUrls)||[]){let o=await et(r);if(Array.isArray(o)&&o.length)return de(t==null?void 0:t.label,`alt:${r}`),o}return de(t==null?void 0:t.label,"empty"),Array.isArray(n)?n:[]}function Wn(e,t){let n=e==null?"":String(e).trim();if(!n)return"";if(n.startsWith("//")||n.startsWith("/")||zn.test(n))return n;let r=n.replace(/\\/g,"/"),o=t?t.endsWith("/")?t:`${t}/`:"",a=f=>f.split("/").map(m=>{if(!m)return"";try{return encodeURIComponent(decodeURIComponent(m))}catch{return encodeURIComponent(m)}}).join("/"),i=r.replace(/^\/+/,"").split("/"),c=[];for(let f of i)if(!(!f||f===".")){if(f===".."){c.length&&c.pop();continue}c.push(f)}let l=c.join("/");if(l.startsWith("data/"))return a(l);let d=c;if(o&&d.length){let f=o.replace(/\/+$/,"").split("/").pop();f&&d[0]===f&&(d=d.slice(1))}let u=d.join("/"),h=a(u);return`${o}${h}`}function Vt(e,t){var o,a;if(!e||typeof e!="object")return e;let n=(a=(o=e.thumbFile)!=null?o:e.thumb)!=null?a:"",r=Wn(n,t);if(r)e.thumbFile=r,e.thumb=r;else if(n){let s=String(n);e.thumbFile=s,e.thumb==null&&(e.thumb=s)}return e}function Jn(e){return Vt(e,qn)}function R(e){return Vt(e,Kn)}function Ut(e){return!e||typeof e!="object"||(R(e),Array.isArray(e.seasons)&&e.seasons.forEach(Wt)),e}function Wt(e){return!e||typeof e!="object"||(R(e),Array.isArray(e.episodes)&&e.episodes.forEach(t=>R(t))),e}function Gn(e){return Array.isArray(e)?(e.forEach(t=>{t&&typeof t=="object"&&Jn(t)}),e):[]}function Yn(e){return Array.isArray(e)?(e.forEach(t=>{t&&typeof t=="object"&&Ut(t)}),e):[]}async function tt(){try{let e=await Ot("data/movies/movies.json",{label:"movies",embedId:"movies-json",exportKey:"movies",globalVar:"__PLEX_MOVIES__",altUrls:["movies/movies.json","data/movies.json","Filme/movies.json","movies.json"]});return Y.movies=0,Gn(e)}catch(e){if(Y.movies<zt)return Y.movies++,await new Promise(t=>setTimeout(t,1e3*Y.movies)),tt();throw e}}async function nt(){try{let e=await Ot("data/series/series_index.json",{label:"shows",embedId:"series-json",exportKey:"shows",globalVar:"__PLEX_SHOWS__",altUrls:["series/series_index.json","data/shows.json","data/series.json","Serien/series.json","series/series.json","series.json","shows.json"]});return Y.shows=0,Yn(e)}catch(e){if(Y.shows<zt)return Y.shows++,await new Promise(t=>setTimeout(t,1e3*Y.shows)),nt();throw e}}async function Jt(e){if(!e)return null;let t=Xn(e),n=Zn(t);if(n!==void 0)return n;let r=Qn(e),o=null;for(let a of r)try{let s=await et(a);if(s&&typeof s=="object"){let i=er(s);return qt(t,i,e),Yt(i)}}catch(s){o=s}return qt(t,null,e),null}function de(e,t){if(e)try{Kt[e]=t}catch{}}function Gt(){return{...Kt}}function Xn(e){let t=[];(e==null?void 0:e.ratingKey)!==void 0&&(e==null?void 0:e.ratingKey)!==null&&(e==null?void 0:e.ratingKey)!==""&&t.push(`rk:${String(e.ratingKey)}`);let n=De(e==null?void 0:e.href);return n&&t.push(`href:${n}`),t}function De(e){return e?String(e).trim().replace(/^\.\//,"").replace(/^\/+/,""):""}function Zn(e){for(let t of e)if(ne.has(t)){let n=ne.get(t);return n?Yt(n):null}}function qt(e,t,n){let r=t;e.forEach(c=>{ne.set(c,r)});let o=n==null?void 0:n.ratingKey;o!=null&&ne.set(`rk:${String(o)}`,r);let a=t&&typeof t=="object"?t.ratingKey:void 0;a!=null&&ne.set(`rk:${String(a)}`,r);let s=De(n==null?void 0:n.href);s&&ne.set(`href:${s}`,r);let i=t&&typeof t=="object"?De(t.href):"";i&&ne.set(`href:${i}`,r)}function Qn(e){let t=new Set,n=De(e==null?void 0:e.href);if(n)if(/^https?:/i.test(n))t.add(n);else{n.startsWith("data/")?t.add(n):t.add(`data/${n}`);let o=n.replace(/^data\//,"");o.startsWith("series/")||t.add(`data/series/${o}`);let a=o.replace(/^series\//,"").replace(/^details\//,"").replace(/\.json$/,"");a&&t.add(`data/series/details/${a}.json`)}let r=e==null?void 0:e.ratingKey;return r!=null&&t.add(`data/series/details/${String(r)}.json`),Array.from(t)}function er(e){if(!e||typeof e!="object")return null;let t={...e};R(t),t.genres=rt(t.genres);let n=rr(t.cast||t.roles||[]);return t.cast=n,t.roles=n,t.seasons=Array.isArray(t.seasons)?t.seasons.map(tr).filter(Boolean):[],t.seasonCount=Number.isFinite(t.seasonCount)?t.seasonCount:t.seasons.length,Ut(t),t}function tr(e){if(!e||typeof e!="object")return null;let t={...e};return R(t),t.genres=rt(t.genres),t.episodes=Array.isArray(t.episodes)?t.episodes.map(nr).filter(Boolean):[],Wt(t),t}function nr(e){if(!e||typeof e!="object")return null;let t={...e};return R(t),t.genres=rt(t.genres),t}function rt(e){if(!Array.isArray(e))return[];let t=new Set,n=[];return e.forEach(r=>{let o=null;if(typeof r=="string"){let a=r.trim();a&&(o={tag:a})}else if(r&&typeof r=="object"){let a=String(r.tag||r.title||r.name||r.label||"").trim();a&&(o={...r,tag:a})}o&&!t.has(o.tag)&&(t.add(o.tag),n.push(o))}),n}function rr(e){return Array.isArray(e)?e.map(t=>{if(!t)return null;if(typeof t=="string"){let n=t.trim();return n?{tag:n}:null}if(typeof t=="object"){let n=String(t.tag||t.name||t.role||"").trim();return n?{...t,tag:n}:{...t}}return null}).filter(Boolean):[]}function Yt(e){if(e==null)return e;try{return structuredClone(e)}catch{}try{return JSON.parse(JSON.stringify(e))}catch{}return e}var Kt,ne,Y,zt,Hn,qn,Kn,zn,ue=$(()=>{Qe();Kt={movies:null,shows:null},ne=new Map,Y={movies:0,shows:0},zt=3,Hn=1e3*60*30,qn="data/movies/",Kn="data/series/",zn=/^[a-z][a-z0-9+.-]*:/i});function re(e){let t=new Set,n=[];return(e||[]).forEach(r=>{let o="";typeof r=="string"?o=r:r&&typeof r=="object"&&(o=r.tag||r.title||r.name||"");let a=String(o||"").trim();a&&!t.has(a)&&(t.add(a),n.push(a))}),n}function ot(e,t,n=3){if(!e)return;let r=(t||[]).filter(Boolean);if(r.length>n){let o=r.slice(0,n),a=r.slice(n),s=o.map(c=>Pe(c)),i=Pe(`+ ${a.length}`);i.classList.add("more","card__chip--more"),i.setAttribute("data-more",a.length),i.setAttribute("title",`${a.length} weitere Genres: ${a.join(", ")}`),i._extraChips=a.map(c=>Pe(c)),s.push(i),e.replaceChildren(...s)}else{let o=r.map(a=>Pe(a));e.replaceChildren(...o)}ar(e)}function ar(e=document){try{e.querySelectorAll(".chip.more, .card__chip--more").forEach(t=>{t.dataset.bound||(t.dataset.bound="1",t.addEventListener("click",n=>{n.stopPropagation();let r=t.closest(".card");if(r)r.click();else{let o=t._extraChips||[];try{o.forEach(a=>t.before(a))}catch{}t.remove()}}))})}catch{}}function fe(e){return(e&&e.collections||[]).map(t=>t&&(t.tag||t.title||t.name||"")).filter(Boolean)}function L(e){if(!e)return"";let t=[e.originallyAvailableAt,e.year,e.releaseDate,e.premiereDate];for(let n of t){if(n==null)continue;let r=String(n);if(!r)continue;let o=r.match(/\d{4}/);if(o)return o[0]}return""}function H(e){if(e instanceof Number)return H(e.valueOf());if(typeof e=="number")return Number.isFinite(e)?e.toFixed(1):"0.0";if(typeof e=="string"){let t=e.trim();if(!t)return"0.0";let n=Number(t);return Number.isFinite(n)?n.toFixed(1):"0.0"}return"0.0"}function Pe(e){let t=document.createElement("span");return t.className="chip",t.textContent=String(e||""),t}function he(e){if(!(e!=null&&e.addedAt))return!1;let t=new Date(e.addedAt).getTime();if(!Number.isFinite(t))return!1;let n=E().cfg||{},r=Number(n.newDays||30);return Date.now()-t<=r*24*60*60*1e3}function oe(){try{return localStorage.getItem("useTmdb")==="1"}catch{return!1}}var we=$(()=>{J()});function sr(){try{z=new Set(JSON.parse(localStorage.getItem(Qt)||"[]"))}catch{z=new Set}}function en(){try{localStorage.setItem(Qt,JSON.stringify(Array.from(z.values())))}catch{}}function st(e){var r,o;if(!e)return"";let t=e.type==="tv"||e.libraryType==="show"?"show":"movie",n=((r=e.ids)==null?void 0:r.imdb)||((o=e.ids)==null?void 0:o.tmdb)||String(e.ratingKey||"");return n?`${t}:${n}`:""}function tn(e){return z.has(st(e))}function ir(){return z.size}function it(e){let t=st(e);if(!t)return;z.has(t)?z.delete(t):z.add(t),en(),ct();let n=document.getElementById("watchlistPanel");n&&!n.hidden&&je()}function ct(){let e=document.getElementById("watchlistCount");e&&(e.textContent=String(ir()))}function Xt(){let e=document.getElementById("watchlistPanel");e&&(e.hidden=!1,e.setAttribute("aria-hidden","false"),je())}function Zt(){let e=document.getElementById("watchlistPanel");e&&(e.hidden=!0,e.setAttribute("aria-hidden","true")),at(!1)}function cr(){z.clear(),en(),ct(),je()}function lr(){let e=nn(),t=JSON.stringify(e,null,2),n=new Blob([t],{type:"application/json"}),r=document.createElement("a");r.href=URL.createObjectURL(n),r.download="watchlist.json",document.body.append(r),r.click(),r.remove(),setTimeout(()=>URL.revokeObjectURL(r.href),1e3)}function nn(){let e=E(),t=(e.movies||[]).concat(e.shows||[]),n=new Map(t.map(r=>[st(r),r]));return Array.from(z.values()).map(r=>n.get(r)).filter(Boolean)}function je(){let e=document.getElementById("watchlistItems"),t=document.getElementById("watchlistEmpty");if(!e||!t)return;let n=nn();if(n.length===0){e.replaceChildren(),t.hidden=!1;return}t.hidden=!0;let r=document.createDocumentFragment();n.forEach(o=>{let a=document.createElement("li");a.className="watchlist-item";let s=document.createElement("span");s.className="title",s.textContent=o.title||"";let i=document.createElement("button");i.textContent="Entfernen",i.addEventListener("click",()=>{it(o),je()});let c=document.createElement("button");c.textContent="\xD6ffnen",c.addEventListener("click",()=>{var u,h;let l=o.type==="tv"?"show":"movie",d=((u=o.ids)==null?void 0:u.imdb)||((h=o.ids)==null?void 0:h.tmdb)||String(o.ratingKey||"");d&&(location.hash=`#/${l}/${d}`)}),a.append(s,c,i),r.append(a)}),e.replaceChildren(r)}function rn(){sr(),ct();let e=document.getElementById("openWatchlist"),t=document.getElementById("watchlistToggle"),n=document.getElementById("closeWatchlist"),r=document.getElementById("clearWatchlist"),o=document.getElementById("exportWatchlist");e&&e.addEventListener("click",()=>{Xt(),at(!0)}),t&&t.addEventListener("click",()=>{let a=document.getElementById("watchlistPanel");a&&!a.hidden?Zt():(Xt(),at(!0))}),n&&n.addEventListener("click",()=>{Zt()}),r&&r.addEventListener("click",()=>{cr()}),o&&o.addEventListener("click",()=>{lr()})}function at(e){let t=document.getElementById("watchlistToggle");t&&t.setAttribute("aria-expanded",e?"true":"false")}var Qt,z,lt=$(()=>{J();Qt="watchlist:v1",z=new Set});function an(e,t){let n=dr(e,t);if(!n)return;let r=Array.isArray(e)&&!dt(e)?e||[]:Array.isArray(t)?t:[];n.replaceChildren(),(r||[]).forEach((o,a)=>n.append(ur(o,a)))}function dt(e){return e instanceof Element||typeof e=="string"}function dr(e,t){if(dt(e)){if(e instanceof Element)return e;if(typeof e=="string")return document.querySelector(e)}if(dt(t)){if(t instanceof Element)return t;if(typeof t=="string")return document.querySelector(t)}return document.getElementById("seasonsAccordion")}function ur(e,t){R(e);let n=document.createElement("article");n.className="season-card";let r=document.createElement("div");r.className="season-head";let o=document.createElement("div");o.className="season-thumb";let a=new Image;a.loading="lazy",a.decoding="async",a.src=e.thumbFile||"",a.alt=e.title||`Staffel ${e.seasonNumber||t+1}`,o.append(a);let s=document.createElement("div"),i=document.createElement("div");i.className="season-title",i.textContent=e.title||`Staffel ${e.seasonNumber||t+1}`;let c=document.createElement("div");c.className="season-sub";let l=e.year||e.releaseYear||"",d=Array.isArray(e.episodes)?e.episodes.length:e.episodeCount||0;c.textContent=[l,d?`${d} Episoden`:""].filter(Boolean).join(" \u2022 "),s.append(i,c);let u=document.createElement("div");u.className="chev",u.textContent="\u203A",r.append(o,s,u);let h=document.createElement("div");return h.className="season-body",(e.episodes||[]).forEach(f=>{R(f),h.append(fr(f))}),r.addEventListener("click",()=>n.classList.toggle("open")),n.append(r,h),n}function fr(e){var h;let t=document.createElement("div");t.className="episode";let n=document.createElement("div");n.className="ep-title";let r=e.seasonNumber!=null?Number(e.seasonNumber):null,o=e.episodeNumber!=null?Number(e.episodeNumber):null,a=e.seasonEpisode&&String(e.seasonEpisode).toUpperCase()||(Number.isFinite(r)&&Number.isFinite(o)?`S${String(r).padStart(2,"0")}E${String(o).padStart(2,"0")}`:"");n.textContent=`${a?a+" \u2022 ":""}${e.title||""}`;let s=document.createElement("div");s.className="badges";let i=Number((h=e.audienceRating)!=null?h:e.rating);if(Number.isFinite(i)){let f=document.createElement("span");f.className="badge",f.textContent=`${i.toFixed(1)}`,s.append(f)}let c=document.createElement("div");c.className="ep-meta";let l=e.durationMin||(e.duration?Math.round(Number(e.duration)/6e4):null),d=e.durationHuman||(l?`${l} min`:null),u=e.originallyAvailableAt||e.date||"";return c.textContent=[d,u].filter(Boolean).join(" \u2022 "),t.append(n,s,c),t}var sn=$(()=>{ue()});function Ee(e){if(e==null||typeof e!="object")return e;if(typeof structuredClone=="function")try{return structuredClone(e)}catch{}try{return JSON.parse(JSON.stringify(e))}catch{}if(Array.isArray(e))return e.map(n=>Ee(n));let t={};for(let n of Object.keys(e))t[n]=Ee(e[n]);return t}function Re(e){if(!e||typeof e!="object")return null;let t=Ee(e);return t.type==="show"&&(t.type="tv"),t.type||(t.type="movie"),t}function He(e){if(!e||typeof e!="object")return null;let t=Ee(e);return t.type!=="tv"&&(t.type="tv"),ut(t),t}function hr(e){if(!e||typeof e!="object")return null;let t=Ee(e);return ut(t),t}function cn(e){let t=Array.isArray(e==null?void 0:e.seasons)?e.seasons:[],n=t.some(o=>Array.isArray(o==null?void 0:o.episodes)&&o.episodes.length),r=Array.isArray(e==null?void 0:e.cast)?e.cast:Array.isArray(e==null?void 0:e.roles)?e.roles:[];return!t.length||!n||!r.length}function ln(e,t){if(!e)return e;if(t&&typeof t=="object"){let n=hr(t);Object.assign(e,n)}return ut(e),e}function ut(e){if(!e||typeof e!="object")return;ft(e),e.genres=ht(e.genres);let t=mr(e.cast||e.roles||[]);e.cast=t,e.roles=t,e.seasons=Array.isArray(e.seasons)?e.seasons.map(gr).filter(Boolean):[];let n=Number(e.seasonCount);e.seasonCount=Number.isFinite(n)&&n>0?n:e.seasons.length}function gr(e){if(!e||typeof e!="object")return null;let t={...e};return ft(t),t.genres=ht(t.genres),t.episodes=Array.isArray(t.episodes)?t.episodes.map(pr).filter(Boolean):[],t}function pr(e){if(!e||typeof e!="object")return null;let t={...e};return ft(t),t.genres=ht(t.genres),t}function ft(e){R(e)}function ht(e){if(!Array.isArray(e))return[];let t=new Set,n=[];return e.forEach(r=>{let o=null;if(typeof r=="string"){let a=r.trim();a&&(o={tag:a})}else if(r&&typeof r=="object"){let a=String(r.tag||r.title||r.name||r.label||"").trim();a&&(o={...r,tag:a})}o&&!t.has(o.tag)&&(t.add(o.tag),n.push(o))}),n}function mr(e){return Array.isArray(e)?e.map(t=>{if(!t)return null;if(typeof t=="string"){let n=t.trim();return n?{tag:n}:null}if(typeof t=="object"){let n=String(t.tag||t.name||t.role||"").trim();return n?{...t,tag:n}:{...t}}return null}).filter(Boolean):[]}var dn=$(()=>{ue()});var un={};Ne(un,{DEMO_MOVIE:()=>br,DEMO_SERIES:()=>vr});var br,vr,fn=$(()=>{br={type:"movie",title:"Lumen: Der Aufbruch",tagline:"Eine cineastische Demo f\xFCr das neue Modal",overview:"Die Crew der Lumen wagt den Sprung in unerforschte Welten und enth\xFCllt dabei eine Energiequelle, die alles ver\xE4ndern k\xF6nnte. Zwischen Loyalit\xE4t, Intrigen und berauschenden Bildern entfaltet sich ein Abenteuer, das f\xFCr das Cinematic-Layout entworfen wurde.",summary:"Die Crew der Lumen entdeckt eine Energiequelle, die das Schicksal der Menschheit ver\xE4ndern k\xF6nnte.",runtimeMin:142,contentRating:"FSK 12",studio:"Aurora Pictures",rating:8.4,audienceRating:8,userRating:8.7,originallyAvailableAt:"2024-05-17",countries:[{tag:"Deutschland"},{tag:"Kanada"}],genres:[{tag:"Science-Fiction"},{tag:"Drama"},{tag:"Abenteuer"}],cast:[{name:"Mara Lenz",role:"Captain Alys Vega",tmdbProfile:"/3rxeQHiuCYaXJqfyUG8yt0YdHtH.jpg"},{name:"Tariq Benassi",role:"Navigator Elian Soh",tmdbProfile:"/wGl8DCycJ2U0FvJbLABd8R4FS3X.jpg"},{name:"Hannah Ko",role:"Wissenschaftlerin Dr. Mira Han",tmdbProfile:"/hJuDvwzS0SPlsE6MN4pF2UYDGtt.jpg"}],directors:[{tag:"Jonas Falk"}],writers:[{tag:"Lea Winter"}],producers:[{tag:"Studio Atlas"}],labels:[{tag:"Dolby Atmos"},{tag:"4K"}],collections:[{tag:"Aurora-Saga"}],trailer:"https://www.youtube.com/watch?v=dQw4w9WgXcQ",tmdbPoster:"https://image.tmdb.org/t/p/w500/2lUYbD2C3XSuwqMUbDVDQuz9mqz.jpg",ids:{tmdb:"demo-lumen",imdb:"tt0000001"},addedAt:"2024-06-01T12:00:00Z"},vr={type:"tv",title:"Aurora Station",tagline:"Neue Horizonte in Serie",overview:"Die Besatzung der Aurora Station sch\xFCtzt eine Au\xDFenposten an der Grenze des bekannten Raums. Jede Episode verbindet kosmische R\xE4tsel mit pers\xF6nlichen Geschichten \u2013 perfekt geeignet, um das Cinematic-Modal auszuprobieren.",summary:"Ein orbitaler Au\xDFenposten ringt um Hoffnung und Zusammenhalt, w\xE4hrend eine fremde Macht erwacht.",contentRating:"TV-14",studio:"Nebula Network",originallyAvailableAt:"2023-09-14",seasonCount:2,genres:[{tag:"Science-Fiction"},{tag:"Drama"}],countries:[{tag:"USA"},{tag:"Island"}],creators:[{tag:"Elina S\xF8rensen"}],cast:[{name:"Noah Adler",role:"Commander Ivar Hale",tmdbProfile:"/4MqUjb1SYrzHmFSVoKHSKP5MGGm.jpg"},{name:"Sofia Idris",role:"Ingenieurin Kaia Rhee",tmdbProfile:"/tHMgWz6EpRdbgoMJ2JfzFzjg3QB.jpg"},{name:"Helena Ruiz",role:"Strategin Tala Voss",tmdbProfile:"/ziEuG1ESSofxDCspotYlrwz3Tq.png"}],seasons:[{title:"Staffel 1",seasonNumber:1,year:2023,thumbFile:"https://image.tmdb.org/t/p/w300/4dO2YpC8S9nLmQAXoJLRV8LZRxn.jpg",episodes:[{title:"Kapitel Eins: Erwachen",seasonNumber:1,episodeNumber:1,durationMin:54,originallyAvailableAt:"2023-09-14",audienceRating:8.6},{title:"Kapitel Zwei: Grenzwelten",seasonNumber:1,episodeNumber:2,durationMin:52,originallyAvailableAt:"2023-09-21",audienceRating:8.2}]},{title:"Staffel 2",seasonNumber:2,year:2024,thumbFile:"https://image.tmdb.org/t/p/w300/bSL4hY8SgdKzac8AUbWQm74y87C.jpg",episodes:[{title:"Kapitel Dreizehn: Resonanz",seasonNumber:2,episodeNumber:1,durationMin:56,originallyAvailableAt:"2024-02-08",audienceRating:8.9},{title:"Kapitel Vierzehn: Echo",seasonNumber:2,episodeNumber:2,durationMin:55,originallyAvailableAt:"2024-02-15",audienceRating:8.7}]}],tmdbPoster:"https://image.tmdb.org/t/p/w500/a4I481szRmycyreQTLrRe4f4YJe.jpg",ids:{tmdb:"demo-aurora-station",imdb:"tt0000002"}}});function gn(){return gt||(gt=Promise.resolve().then(()=>(fn(),un)).catch(e=>({DEMO_MOVIE:null,DEMO_SERIES:null}))),gt}function Er(){if(D)return D;let e=document.getElementById("modal-root-v2");if(!e)return null;if(V=e,e.classList.add("modalv2-overlay"),e.hasAttribute("hidden")||e.setAttribute("hidden",""),e.dataset.modalv2Ready||(e.innerHTML=`
      <div class="modalv2-backdrop" data-modalv2-backdrop="1"></div>
      <div class="modalv2-dialog" role="dialog" aria-modal="true">
        <div class="modalv2-scroll" data-modalv2-scroll></div>
      </div>
    `,e.dataset.modalv2Ready="1",e.addEventListener("click",Sr)),N=e.querySelector(".modalv2-dialog"),N&&!N.hasAttribute("tabindex")&&N.setAttribute("tabindex","-1"),Z=e.querySelector("[data-modalv2-scroll]"),Z&&!D){let t=Z.querySelector(".modalv2");t?D=t:(D=document.createElement("div"),D.className="modalv2",D.setAttribute("hidden",""),Z.appendChild(D))}return D}function Sr(e){if(!V)return;let t=e.target;(t===V||t&&t.dataset&&t.dataset.modalv2Backdrop)&&mt()}function pn(){return N?Array.from(N.querySelectorAll('a[href], button:not([disabled]), textarea, input, select, [tabindex]:not([tabindex="-1"])')).filter(t=>t.hasAttribute("disabled")||t.getAttribute("aria-hidden")==="true"||t.hasAttribute("hidden")?!1:t.offsetParent!==null):[]}function Ar(){N&&(se&&N.removeEventListener("keydown",se),se=e=>{if(e.key!=="Tab")return;let t=pn();if(!t.length)return;let n=t[0],r=t[t.length-1];e.shiftKey?document.activeElement===n&&(e.preventDefault(),r.focus()):document.activeElement===r&&(e.preventDefault(),n.focus())},N.addEventListener("keydown",se))}function kr(){!N||!se||(N.removeEventListener("keydown",se),se=null)}function Cr(){pe||(pe=e=>{e.key==="Escape"&&(e.preventDefault(),mt())},window.addEventListener("keydown",pe))}function xr(){pe&&(window.removeEventListener("keydown",pe),pe=null)}function qe(){let e=Er();return!e||!V?null:(V.hidden=!1,V.setAttribute("aria-hidden","false"),document.body.classList.add("modalv2-open"),Z&&(Z.scrollTop=0),Ar(),Cr(),e)}function pt(){if(!N)return;let e=N.querySelector("#v2Close"),t=pn(),n=e&&!e.hasAttribute("hidden")?e:t[0];if(n||(n=N),n){let r=()=>{try{n.focus()}catch{}};(window.requestAnimationFrame||setTimeout)(r,0)}}function Tr(e){var r;let t=((r=e==null?void 0:e.tmdb)==null?void 0:r.poster)||(e==null?void 0:e.tmdbPoster),n=(e==null?void 0:e.poster)||(e==null?void 0:e.thumbFile)||(e==null?void 0:e.art)||"";return oe()&&t?t:n}function mn(e){let t=(e==null?void 0:e.runtimeMin)||(e==null?void 0:e.durationMin)||(e!=null&&e.duration?Math.round(Number(e.duration)/6e4):null);return Number.isFinite(t)?(e==null?void 0:e.type)==="tv"?`~${t} min/Ep`:`${t} min`:""}function Ir(e){var n;let t=Number((n=e==null?void 0:e.rating)!=null?n:e==null?void 0:e.audienceRating);return Number.isFinite(t)?`\u2605 ${H(t)}`:""}function bn(e){return(e==null?void 0:e.studio)||(e==null?void 0:e.network)||(e==null?void 0:e.studioName)||""}function Lr(e){let t=[e==null?void 0:e.originallyAvailableAt,e==null?void 0:e.releaseDate,e==null?void 0:e.premiereDate,e==null?void 0:e.firstAired,e==null?void 0:e.airDate];for(let r of t){let o=r==null?"":String(r).trim();if(!o)continue;let a=new Date(o);if(Number.isFinite(a.getTime()))try{return a.toLocaleDateString("de-DE",{year:"numeric",month:"2-digit",day:"2-digit"})}catch{}let s=o.match(/^\d{4}-\d{2}-\d{2}/);if(s&&s[0])return s[0];if(o.length>=4)return o.slice(0,10)}let n=L(e);return n?String(n):""}function ae(e){return Array.isArray(e)?e.map(t=>t?typeof t=="string"?t:t.tag||t.title||t.name||"":"").filter(Boolean):[]}function Nr(e){let n=(Array.isArray(e==null?void 0:e.genres)?e.genres:[]).map(r=>r?typeof r=="string"?r:r.tag||r.title||r.name||"":"").filter(Boolean);return Array.from(new Set(n))}function Br(e){let t=[];return he(e)&&t.push("Neu"),(e==null?void 0:e.type)==="tv"&&Number.isFinite(Number(e==null?void 0:e.seasonCount))&&t.push(`Staffeln: ${e.seasonCount}`),((e==null?void 0:e.genres)||[]).map(r=>r?typeof r=="string"?r:r.tag||r.title||r.name||"":"").filter(Boolean).forEach(r=>t.push(r)),t}function Fr(e){return(Array.isArray(e==null?void 0:e.cast)?e.cast:Array.isArray(e==null?void 0:e.roles)?e.roles:[]).map(n=>{var i,c,l;if(!n)return null;if(typeof n=="string"){let d=String(n).trim();return d?{name:d,role:"",thumb:"",tmdbProfile:"",raw:null}:null}let r=String(n.tag||n.name||n.role||"").trim();if(!r)return null;let o=(()=>{let d=String(n.role||"").trim();return d?d.toLowerCase()===r.toLowerCase()?"":d:""})(),a=[(i=n==null?void 0:n.tmdb)==null?void 0:i.profile,(c=n==null?void 0:n.tmdb)==null?void 0:c.profile_path,(l=n==null?void 0:n.tmdb)==null?void 0:l.profilePath,n==null?void 0:n.tmdbProfile,n==null?void 0:n.profile,n==null?void 0:n.profile_path,n==null?void 0:n.profilePath].find(d=>typeof d=="string"&&d.trim()),s=[n==null?void 0:n.thumb,n==null?void 0:n.photo,n==null?void 0:n.image].find(d=>typeof d=="string"&&d.trim())||"";return{name:r,role:o,thumb:s,tmdbProfile:a?String(a).trim():"",raw:n}}).filter(Boolean)}function Mr(e){let t=String(e||"").trim();if(!t)return"";if(/^https?:\/\//i.test(t))return t;if(t.startsWith("//"))return`https:${t}`;let n=t.startsWith("/")?t:`/${t}`;return`${yr}${wr}${n}`}function _r(e){let t=String(e||"").trim();return t?/^https?:\/\//i.test(t)||t.startsWith("data:")?t:t.startsWith("//")?`https:${t}`:t:""}function $r(e,t){var o,a,s;if(!e)return"";let n=e.raw||{};if(t){let i=[e.tmdbProfile,(o=n==null?void 0:n.tmdb)==null?void 0:o.profile,(a=n==null?void 0:n.tmdb)==null?void 0:a.profile_path,(s=n==null?void 0:n.tmdb)==null?void 0:s.profilePath,n==null?void 0:n.tmdbProfile,n==null?void 0:n.profile,n==null?void 0:n.profile_path,n==null?void 0:n.profilePath];for(let c of i){let l=Mr(c);if(l)return l}}let r=[e.thumb,n==null?void 0:n.thumb,n==null?void 0:n.photo,n==null?void 0:n.image];for(let i of r){let c=_r(i);if(c)return c}return""}function Dr(e){let t=String(e||"").trim();if(!t)return"?";let r=t.split(/\s+/).slice(0,2).map(o=>o.charAt(0)).filter(Boolean);return r.length?r.join("").toUpperCase():t.charAt(0).toUpperCase()}function Pr(e){let t=e.querySelector(".v2-tabs");if(!t)return;let n=Array.from(t.querySelectorAll("button[data-t]")),r=s=>{n.forEach(i=>{let c=i.dataset.t===s;i.classList.toggle("active",c),i.setAttribute("aria-selected",c?"true":"false"),i.tabIndex=c?0:-1;let l=e.querySelector(`.v2-pane[data-pane="${i.dataset.t}"]`);l&&(l.hidden=!c,l.setAttribute("aria-hidden",l.hidden?"true":"false"))})},o=(s,i)=>{if(!n.length)return;let c=n.indexOf(s),l=i>0?0:n.length-1,d=c===-1?l:(c+i+n.length)%n.length,u=n[d];u&&(u.focus(),r(u.dataset.t))};t.addEventListener("click",s=>{let i=s.target.closest("button[data-t]");i&&(s.preventDefault(),r(i.dataset.t))}),t.addEventListener("keydown",s=>{let i=s.target.closest("button[data-t]");if(i)switch(s.key){case"ArrowLeft":case"ArrowUp":s.preventDefault(),o(i,-1);break;case"ArrowRight":case"ArrowDown":s.preventDefault(),o(i,1);break;case"Home":s.preventDefault(),n[0]&&(n[0].focus(),r(n[0].dataset.t));break;case"End":if(s.preventDefault(),n.length){let c=n[n.length-1];c.focus(),r(c.dataset.t)}break;default:break}});let a=n.find(s=>s.classList.contains("active"))||n[0];a&&r(a.dataset.t)}function jr(e,t){let n=e.querySelector(".v2-cast");if(!n)return;n.innerHTML='<div class="v2-cast-scroll"></div>';let r=n.querySelector(".v2-cast-scroll");if(!r)return;let o=Array.isArray(t)?t.slice(0,12):[];if(!o.length){r.innerHTML='<span class="modalv2-loading">Keine Besetzungsdaten verf\xFCgbar.</span>',r.removeAttribute("role");return}r.setAttribute("role","list");let a=oe();o.forEach(s=>{let i=s&&typeof s=="object"&&"name"in s?s:(()=>{let f=String(s||"").trim();return f?{name:f,role:"",thumb:"",tmdbProfile:"",raw:null}:null})();if(!i||!i.name)return;let c=document.createElement("article");c.className="v2-cast-card",c.tabIndex=0,c.setAttribute("role","listitem");let l=String(i.role||"").trim();c.setAttribute("aria-label",l?`${i.name} \u2013 ${l}`:i.name);let d=document.createElement("div");d.className="v2-cast-avatar";let u=$r(i,a);if(u){d.classList.add("has-image");let f=document.createElement("img");f.src=u,f.alt=i.name,f.loading="lazy",f.decoding="async",d.appendChild(f)}else{let f=document.createElement("span");f.className="v2-cast-initials",f.textContent=Dr(i.name),f.setAttribute("aria-hidden","true"),d.appendChild(f)}let h=document.createElement("p");if(h.className="v2-cast-name",h.textContent=i.name,c.append(d,h),l){let f=document.createElement("p");f.className="v2-cast-role",f.textContent=l,c.append(f)}else c.classList.add("v2-cast-card--no-role");r.appendChild(c)}),r.children.length||(r.innerHTML='<span class="modalv2-loading">Keine Besetzungsdaten verf\xFCgbar.</span>',r.removeAttribute("role"))}function Rr(e,t){let n=e.querySelector(".v2-overview");if(!n)return;let r=typeof t=="string"?t:"";if(!r){n.textContent="";return}let o=document.createElement("p");o.className="v2-overview-text line-clamp line-clamp-5",o.textContent=r;let a=document.createElement("button");a.type="button",a.className="v2-overview-toggle";let s=l=>{o.classList.toggle("is-expanded",l),a.setAttribute("aria-expanded",String(l)),a.textContent=l?"Weniger anzeigen":"Mehr anzeigen"};a.addEventListener("click",()=>{let l=a.getAttribute("aria-expanded")==="true";s(!l)}),n.replaceChildren(o,a),s(!1),(typeof requestAnimationFrame=="function"?requestAnimationFrame:l=>setTimeout(l,0))(()=>{o.scrollHeight>o.clientHeight+1||(o.classList.add("is-expanded"),a.hidden=!0)})}function Hr(e,t){let n=e.querySelector(".v2-details");if(!n)return;n.replaceChildren();let r=document.createElement("div");r.className="v2-details-grid";let o=[],a=Lr(t);a&&o.push(["Ver\xF6ffentlichung",a]);let s=mn(t);s&&o.push(["Laufzeit",s]);let i=bn(t);i&&o.push(["Studio",i]);let c=((t==null?void 0:t.contentRating)||"").trim();c&&o.push(["Freigabe",c]);let l=y=>{if(y instanceof Number)return l(y.valueOf());if(typeof y=="number")return Number.isFinite(y)?H(y):"";if(typeof y=="string"){let T=y.trim();if(!T)return"";let x=Number(T);return Number.isFinite(x)?H(x):""}return""},d=l(t==null?void 0:t.rating),u=l(t==null?void 0:t.audienceRating),h=l(t==null?void 0:t.userRating);if(d?(o.push(["Bewertung",`\u2605 ${d}`]),u&&u!==d&&o.push(["Publikum",`\u2605 ${u}`])):u&&o.push(["Bewertung",`\u2605 ${u}`]),h&&o.push(["Eigene Wertung",`\u2605 ${h}`]),(t==null?void 0:t.type)==="tv"){let y=Number(t==null?void 0:t.seasonCount),T=Number.isFinite(y)?y:Array.isArray(t==null?void 0:t.seasons)?t.seasons.length:null;Number.isFinite(T)&&T>0&&o.push(["Staffeln",String(T)]);let x=Array.isArray(t==null?void 0:t.seasons)?t.seasons.reduce((F,B)=>{if(!B)return F;let w=Array.isArray(B.episodes)?B.episodes.length:0;return F+(Number.isFinite(w)?w:0)},0):null;Number.isFinite(x)&&x>0&&o.push(["Episoden",String(x)])}let f=ae(t==null?void 0:t.countries);f.length&&o.push(["L\xE4nder",f.join(", ")]);let m=ae(t==null?void 0:t.collections);m.length&&o.push(["Sammlungen",m.join(", ")]);let v=ae(t==null?void 0:t.labels);if(v.length&&o.push(["Labels",v.join(", ")]),t!=null&&t.editionTitle&&o.push(["Edition",t.editionTitle]),t!=null&&t.originalTitle&&t.originalTitle!==t.title&&o.push(["Originaltitel",t.originalTitle]),o.length){let y=document.createElement("section");y.className="v2-details-section",y.dataset.section="general";let T=document.createElement("h3");T.className="v2-details-heading",T.textContent="Allgemein";let x=document.createElement("dl");x.className="v2-details-list",o.forEach(([F,B])=>{if(!F||!B)return;let w=document.createElement("dt");w.textContent=F;let M=document.createElement("dd");M.textContent=B,x.append(w,M)}),x.childElementCount&&(y.append(T,x),r.append(y))}let A=Nr(t);if(A.length){let y=document.createElement("section");y.className="v2-details-section",y.dataset.section="genres";let T=document.createElement("h3");T.className="v2-details-heading",T.textContent="Genres";let x=document.createElement("div");x.className="v2-chip-group",A.forEach(F=>{let B=document.createElement("span");B.className="chip",B.textContent=F,x.appendChild(B)}),y.append(T,x),r.append(y)}let C=[],_=ae(t==null?void 0:t.directors);_.length&&C.push(["Regie",_.join(", ")]);let j=ae(t==null?void 0:t.writers);j.length&&C.push(["Drehbuch",j.join(", ")]);let Q=ae(t==null?void 0:t.producers);Q.length&&C.push(["Produktion",Q.join(", ")]);let Le=ae((t==null?void 0:t.creators)||(t==null?void 0:t.showrunners));if((t==null?void 0:t.type)==="tv"&&Le.length&&C.push(["Creator",Le.join(", ")]),C.length){let y=document.createElement("section");y.className="v2-details-section",y.dataset.section="crew";let T=document.createElement("h3");T.className="v2-details-heading",T.textContent="Credits";let x=document.createElement("dl");x.className="v2-details-list",C.forEach(([F,B])=>{if(!F||!B)return;let w=document.createElement("dt");w.textContent=F;let M=document.createElement("dd");M.textContent=B,x.append(w,M)}),x.childElementCount&&(y.append(T,x),r.append(y))}if(r.childElementCount)n.appendChild(r);else{let y=document.createElement("p");y.className="v2-details-empty",y.textContent="Keine zus\xE4tzlichen Details verf\xFCgbar.",n.appendChild(y)}}function qr(e,t){let n=e.querySelector(".v2-seasons");if(!n)return;let r=Array.isArray(t==null?void 0:t.seasons)?t.seasons:[];if(!r.length){n.innerHTML='<p class="modalv2-loading">Keine Staffel-Informationen verf\xFCgbar.</p>';return}n.innerHTML="",an(n,r)}function Kr(e,t){var l,d;let n=e.querySelector("#v2Tmdb"),r=e.querySelector("#v2Imdb"),o=e.querySelector("#v2Trailer"),a=((l=t==null?void 0:t.ids)==null?void 0:l.tmdb)||(t==null?void 0:t.tmdbId),s=((d=t==null?void 0:t.ids)==null?void 0:d.imdb)||(t==null?void 0:t.imdbId),i=(t==null?void 0:t.trailer)||(t==null?void 0:t.trailerUrl),c=(t==null?void 0:t.type)==="tv"?"tv":"movie";n&&(a?(n.hidden=!1,n.href=`https://www.themoviedb.org/${c}/${a}`):(n.hidden=!0,n.removeAttribute("href"))),r&&(s?(r.hidden=!1,r.href=`https://www.imdb.com/title/${s}/`):(r.hidden=!0,r.removeAttribute("href"))),o&&(i?(o.hidden=!1,o.onclick=()=>window.open(i,"_blank","noopener")):(o.hidden=!0,o.onclick=null))}function zr(e,t){let n=e.querySelector(".v2-title");n&&(n.textContent=(t==null?void 0:t.title)||(t==null?void 0:t.name)||"");let r=((t==null?void 0:t.tagline)||"").trim(),o=e.querySelector(".v2-meta"),a=e.querySelector(".v2-subline"),s=L(t),i=mn(t),c=Ir(t),l=bn(t),d=[s,i,c,l].filter(Boolean);if(a){let v=d.join(" \u2022 ");a.textContent=r||v,a.hidden=!(r||v)}o&&(o.textContent=r&&d.length?d.join(" \u2022 "):"",o.hidden=!(r&&d.length));let u=e.querySelector(".v2-chips");u&&(u.replaceChildren(),Br(t).forEach(v=>{let A=document.createElement("span");A.className="chip",A.textContent=v,u.appendChild(A)}),u.hidden=!u.childElementCount);let h=e.querySelector(".v2-facts"),f=e.querySelector(".v2-facts-list");if(h&&f){let v=[];s&&v.push(["Jahr",s]);let A=((t==null?void 0:t.contentRating)||"").trim();A&&v.push(["Freigabe",A]),i&&v.push(["Laufzeit",i]),c&&v.push(["Bewertung",c]),l&&v.push(["Studio",l]),f.replaceChildren(),v.forEach(([C,_])=>{let j=document.createElement("dt");j.textContent=C;let Q=document.createElement("dd");Q.textContent=_,f.append(j,Q)}),h.hidden=!v.length}let m=e.querySelector(".v2-poster img");if(m){let v=Tr(t);m.src=v||"",m.alt=t!=null&&t.title?`Poster: ${t.title}`:"",m.loading="lazy",m.decoding="async",m.classList.remove("is-ready"),v?(m.addEventListener("load",hn,{once:!0}),m.addEventListener("error",hn,{once:!0})):m.classList.add("is-ready")}}function hn(e){var t;(t=e.currentTarget)==null||t.classList.add("is-ready")}function Or(e="Details werden geladen \u2026"){let t=qe();if(!t)return;t.hidden=!1;let n=document.createElement("div");n.className="modalv2-loading",n.textContent=String(e||"Details werden geladen \u2026"),t.replaceChildren(n)}function vn(e){let t=qe();if(!t)return;t.hidden=!1;let n=(e==null?void 0:e.type)==="tv";t.innerHTML=`
    <section class="v2-layout">
      <aside class="v2-side">
        <div class="v2-poster"><img alt=""></div>
        <div class="v2-facts" aria-label="Schnellinfos" hidden>
          <h3 class="v2-facts-title">Schnellinfos</h3>
          <dl class="v2-facts-list"></dl>
        </div>
      </aside>
      <div class="v2-info">
        <header class="v2-head">
          <div class="v2-titlebar">
            <div class="v2-title-wrap">
              <h2 class="v2-title" id="modalV2Title"></h2>
              <div class="v2-subline"></div>
              <div class="v2-meta"></div>
            </div>
            <div class="v2-actions" aria-label="Externe Aktionen">
              <button class="v2-icon-btn" id="v2Close" type="button" aria-label="Schlie\xDFen">
                <svg class="v2-icon" viewBox="0 0 24 24" aria-hidden="true" focusable="false">
                  <path d="M6 6l12 12M6 18L18 6" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"></path>
                </svg>
              </button>
              <a class="v2-icon-btn" id="v2Tmdb" target="_blank" rel="noopener noreferrer" aria-label="Auf TMDB \xF6ffnen" hidden>
                <svg class="v2-icon" viewBox="0 0 24 24" aria-hidden="true" focusable="false">
                  <path d="M4 9h16v10a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V9z" fill="none" stroke="currentColor" stroke-width="1.7" stroke-linejoin="round"></path>
                  <path d="M4 9V7a2 2 0 0 1 2-2h1l2 4 2-4 2 4 2-4h1a2 2 0 0 1 2 2v2" fill="none" stroke="currentColor" stroke-width="1.7" stroke-linecap="round" stroke-linejoin="round"></path>
                </svg>
              </a>
              <a class="v2-icon-btn" id="v2Imdb" target="_blank" rel="noopener noreferrer" aria-label="Auf IMDb \xF6ffnen" hidden>
                <svg class="v2-icon" viewBox="0 0 24 24" aria-hidden="true" focusable="false">
                  <path d="M12 4l2.4 4.9 5.4.8-3.9 3.8.9 5.4-4.8-2.5-4.8 2.5.9-5.4-3.9-3.8 5.4-.8z" fill="none" stroke="currentColor" stroke-width="1.7" stroke-linejoin="round"></path>
                </svg>
              </a>
              <button class="v2-icon-btn" id="v2Trailer" type="button" aria-label="Trailer abspielen" hidden>
                <svg class="v2-icon" viewBox="0 0 24 24" aria-hidden="true" focusable="false">
                  <path d="M9 6l8 6-8 6V6z" fill="none" stroke="currentColor" stroke-width="1.7" stroke-linejoin="round" stroke-linecap="round"></path>
                </svg>
              </button>
            </div>
          </div>
          <div class="v2-chips" aria-label="Attribute"></div>
        </header>
        <nav class="v2-tabs" aria-label="Details Navigation" role="tablist">
          <button type="button" data-t="overview" class="active" id="v2TabOverview" role="tab" aria-controls="v2PaneOverview" aria-selected="true">\xDCberblick</button>
          <button type="button" data-t="details" id="v2TabDetails" role="tab" aria-controls="v2PaneDetails" aria-selected="false">Details</button>
          ${n?'<button type="button" data-t="seasons" id="v2TabSeasons" role="tab" aria-controls="v2PaneSeasons" aria-selected="false">Staffeln</button>':""}
          <button type="button" data-t="cast" id="v2TabCast" role="tab" aria-controls="v2PaneCast" aria-selected="false">Cast</button>
        </nav>
        <section class="v2-body">
          <div class="v2-pane v2-overview" data-pane="overview" id="v2PaneOverview" role="tabpanel" aria-labelledby="v2TabOverview"></div>
          <div class="v2-pane v2-details" data-pane="details" id="v2PaneDetails" role="tabpanel" aria-labelledby="v2TabDetails" hidden></div>
          ${n?'<div class="v2-pane v2-seasons" data-pane="seasons" id="v2PaneSeasons" role="tabpanel" aria-labelledby="v2TabSeasons" hidden></div>':""}
          <div class="v2-pane v2-cast" data-pane="cast" id="v2PaneCast" role="tabpanel" aria-labelledby="v2TabCast" hidden></div>
        </section>
      </div>
    </section>
  `,zr(t,e),Kr(t,e),Rr(t,(e==null?void 0:e.overview)||(e==null?void 0:e.summary)||""),Hr(t,e),(e==null?void 0:e.type)==="tv"&&qr(t,e),jr(t,Fr(e)),Pr(t);let r=t.querySelector("#v2Close");r&&r.addEventListener("click",mt),N&&N.setAttribute("aria-labelledby","modalV2Title"),pt()}async function Ae(e){let t=++X;ge=document.activeElement instanceof HTMLElement?document.activeElement:null;let n=qe();if(!n)return;let r=await Vr(e);if(t===X){if(!r){n.hidden=!1;let o=document.createElement("div");o.className="modalv2-loading",o.textContent="Film konnte nicht geladen werden.",n.replaceChildren(o),me=null,Se=null,pt();return}me=r,Se="movie",vn(r)}}async function ke(e){let t=++X;ge=document.activeElement instanceof HTMLElement?document.activeElement:null;let n=await Ur(e),r=qe();if(!r||t!==X)return;if(!n){r.hidden=!1;let a=document.createElement("div");a.className="modalv2-loading",a.textContent="Seriendetails konnten nicht geladen werden.",r.replaceChildren(a),me=null,Se=null,pt();return}me=n,Se="show";let o=n;if(cn(o)){if(Or(),t!==X)return;let a=null;try{a=await Jt(o)}catch{a=null}if(t!==X)return;a&&(ln(o,a),me=o)}t===X&&vn(o)}function mt(){if(X++,!!V){if(V.hidden=!0,V.setAttribute("aria-hidden","true"),document.body.classList.remove("modalv2-open"),kr(),xr(),D&&(D.innerHTML="",D.setAttribute("hidden","")),Z&&(Z.scrollTop=0),ge&&typeof ge.focus=="function")try{ge.focus()}catch{}ge=null,me=null,Se=null}}async function Vr(e){if(e==="demo"){let{DEMO_MOVIE:a}=await gn();return Re(a)}if(e&&typeof e=="object")return Re(e);let t=e==null?"":String(e).trim();if(!t)return null;let n=E(),o=(Array.isArray(n==null?void 0:n.movies)?n.movies:[]).find(a=>yn(a,t));return o?Re(o):null}async function Ur(e){if(e==="demo"){let{DEMO_SERIES:a}=await gn();return He(a)}if(e&&typeof e=="object")return He(e);let t=e==null?"":String(e).trim();if(!t)return null;let n=E(),o=(Array.isArray(n==null?void 0:n.shows)?n.shows:[]).find(a=>yn(a,t));return o?He(o):null}function yn(e,t){var r,o;if(!e)return!1;let n=String(t||"").trim();return n?!!((r=e==null?void 0:e.ids)!=null&&r.imdb&&String(e.ids.imdb)===n||(o=e==null?void 0:e.ids)!=null&&o.tmdb&&String(e.ids.tmdb)===n||(e==null?void 0:e.ratingKey)!=null&&String(e.ratingKey)===n):!1}var yr,wr,V,N,Z,D,ge,se,pe,X,Se,me,gt,bt=$(()=>{sn();we();J();ue();dn();yr="https://image.tmdb.org/t/p/",wr="w185",V=null,N=null,Z=null,D=null,ge=null,se=null,pe=null,X=0,Se=null,me=null,gt=null});var An={};Ne(An,{renderGrid:()=>P});function Wr(e){let t=k("article","card");t.style.contentVisibility="auto",t.dataset.kind=(e==null?void 0:e.type)==="tv"?"show":"movie",t.tabIndex=0,t.setAttribute("role","button"),e!=null&&e.title&&t.setAttribute("aria-label",e.title);let n=k("div","card__media"),r=new Image;r.loading="lazy",r.decoding="async",r.className="card__img",r.alt=(e==null?void 0:e.title)||"";let o=Sn(e);o&&(r.src=o);let a=k("div","card__media-gradient");a.setAttribute("aria-hidden","true");let s=Qr(e),i=k("div","card__badges");s.forEach(C=>{C instanceof HTMLElement&&i.append(C)}),n.append(r,a),i.childElementCount&&n.append(i);let c=ro(e);if(c>0){let C=k("div","card__progress"),_=document.createElement("span");_.style.width=`${Math.max(0,Math.min(100,c))}%`,C.append(_),n.append(C)}let l=k("div","card__body"),d=document.createElement("h3");d.className="card__title",d.textContent=(e==null?void 0:e.title)||"",e!=null&&e.title&&d.setAttribute("title",e.title);let u=k("div","card__meta"),h=to(e);u.textContent=h.join(" \u2022 "),l.append(d,u);let f=k("div","card__actions"),m=k("div","card__chips"),v=re(e==null?void 0:e.genres);ot(m,v,3);let A=document.createElement("button");return A.type="button",A.className="card__primary",wn(A,e),A.addEventListener("click",C=>{C.stopPropagation(),it(e),wn(A,e)}),f.append(m,A),t.append(n,l,f),t.addEventListener("click",()=>En(e)),t.addEventListener("keydown",C=>{C.target===t&&(C.key==="Enter"||C.key===" ")&&(C.preventDefault(),En(e))}),t}function Jr(e,t){let n=(t||[]).slice().sort((u,h)=>{let f=Number(L(u))||0,m=Number(L(h))||0;return f!==m?f-m:(u.title||"").localeCompare(h.title||"","de")}),r=n.map(u=>Number(L(u))||0).filter(Boolean),o=r.length?Math.min(...r):"",a=n.map(u=>new Date(u.addedAt||0).getTime()).filter(Number.isFinite),s=a.length?new Date(Math.max(...a)).toISOString():null,i=n.map(u=>{var h;return Number((h=u.rating)!=null?h:u.audienceRating)}).filter(Number.isFinite),c=i.length?i.reduce((u,h)=>u+h,0)/i.length:null,l=n.find(u=>u.thumbFile)||n[0]||null,d=Array.from(new Set(n.flatMap(u=>re(u.genres)))).slice(0,4);return{isCollectionGroup:!0,type:"collection",title:e,collectionName:e,items:n,itemCount:n.length,year:o||"",addedAt:s,rating:c,posterItem:l,genres:d}}function Gr(e){let t=document.getElementById("groupCollections"),n=document.getElementById("collectionFilter"),r=n&&n.value;if(!t||!t.checked||r)return e;let o=new Map;e.forEach(s=>{fe(s).forEach(i=>{o.has(i)||o.set(i,[]),o.get(i).push(s)})});let a=[];return o.forEach((s,i)=>{a.push(Jr(i,s))}),a.sort((s,i)=>s.title.localeCompare(i.title,"de")),a}function Yr(e){let t=k("article","card card--collection");t.style.contentVisibility="auto",t.dataset.kind="collection",t.tabIndex=0,t.setAttribute("role","button"),e!=null&&e.title&&t.setAttribute("aria-label",e.title);let n=k("div","card__media"),r=e.posterItem||{},o=new Image;o.loading="lazy",o.decoding="async",o.className="card__img",o.alt=(e==null?void 0:e.title)||"";let a=Sn(r);a&&(o.src=a);let s=k("div","card__media-gradient");s.setAttribute("aria-hidden","true");let i=eo(e),c=k("div","card__badges");i.forEach(v=>{v instanceof HTMLElement&&c.append(v)}),n.append(o,s),c.childElementCount&&n.append(c);let l=k("div","card__body"),d=document.createElement("h3");d.className="card__title",d.textContent=e.title||"",e!=null&&e.title&&d.setAttribute("title",e.title);let u=k("div","card__meta"),h=[e.year,`${e.itemCount} Titel`];Number.isFinite(e.rating)&&h.push(`\u2605 ${H(e.rating)}`),u.textContent=h.filter(Boolean).join(" \u2022 "),l.append(d,u);let f=k("div","card__actions"),m=k("div","card__chips");return ot(m,e.genres||[],3),f.append(m),t.append(n,l,f),t.addEventListener("click",()=>{let v=document.getElementById("collectionFilter");v&&(v.value=e.collectionName||e.title||"",v.dispatchEvent(new Event("change",{bubbles:!0})))}),t.addEventListener("keydown",v=>{if(v.target===t&&(v.key==="Enter"||v.key===" ")){v.preventDefault();let A=document.getElementById("collectionFilter");A&&(A.value=e.collectionName||e.title||"",A.dispatchEvent(new Event("change",{bubbles:!0})))}}),t}function P(e){let{movies:t,shows:n,filtered:r}=E(),o=(e==="shows"?n:t)||[],a=Array.isArray(r)?r:o,s=Gr(a),i=document.getElementById("grid");if(!i)return;Xr(i);let c=document.createDocumentFragment();s.forEach(d=>c.append(d.isCollectionGroup?Yr(d):Wr(d))),i.replaceChildren(c),Zr(i);let l=document.getElementById("empty");l&&(l.hidden=s.length>0)}function Xr(e){e&&(e.classList.remove("is-entering","is-ready"),e.classList.add("is-leaving"))}function Zr(e){e&&(e.classList.remove("is-leaving"),e.classList.add("is-entering"),requestAnimationFrame(()=>{e.classList.add("is-ready"),setTimeout(()=>e.classList.remove("is-entering","is-ready"),240)}))}function Sn(e){var r;if(!e)return"";let t=oe()&&(((r=e==null?void 0:e.tmdb)==null?void 0:r.poster)||(e==null?void 0:e.tmdbPoster)),n=(e==null?void 0:e.thumbFile)||(e==null?void 0:e.poster)||(e==null?void 0:e.art)||(e==null?void 0:e.thumb)||"";return t||n||""}function Qr(e){var o;let t=[];he(e)&&t.push(Ce("Neu"));let n=String((e==null?void 0:e.contentRating)||"").trim();n&&t.push(Ce(n));let r=Number((o=e==null?void 0:e.rating)!=null?o:e==null?void 0:e.audienceRating);return Number.isFinite(r)&&t.push(Ce(`\u2605 ${H(r)}`)),t.slice(0,3)}function eo(e){let t=[];return Number.isFinite(e==null?void 0:e.itemCount)&&e.itemCount>0&&t.push(Ce(`${e.itemCount} Titel`)),e!=null&&e.year&&t.push(Ce(String(e.year))),t}function Ce(e){let t=document.createElement("span");return t.className="badge",t.textContent=String(e||""),t}function wn(e,t){if(!e)return;let n=tn(t);e.textContent=n?"Gemerkt":"Merken",e.classList.toggle("active",n),e.setAttribute("aria-pressed",n?"true":"false")}function to(e){var s;let t=[],n=L(e);n&&t.push(String(n));let r=no(e);r&&t.push(r);let o=Number((s=e==null?void 0:e.rating)!=null?s:e==null?void 0:e.audienceRating);Number.isFinite(o)&&t.push(`\u2605 ${H(o)}`);let a=(e==null?void 0:e.studio)||(e==null?void 0:e.network)||"";return a&&t.push(a),t}function no(e){var r,o;let t=(o=(r=e==null?void 0:e.runtimeMin)!=null?r:e==null?void 0:e.durationMin)!=null?o:e!=null&&e.duration?Math.round(Number(e.duration)/6e4):null,n=Number(t);return!Number.isFinite(n)||n<=0?"":(e==null?void 0:e.type)==="tv"?`~${n} min/Ep`:`${n} min`}function ro(e){var r;let t=Number((r=e==null?void 0:e.viewOffset)!=null?r:e==null?void 0:e.viewoffset),n=Number(e==null?void 0:e.duration);return!Number.isFinite(t)||!Number.isFinite(n)||n<=0?0:Math.max(1,Math.min(100,Math.round(t/n*100)))}function oo(e){var n,r;if(!e)return"";let t=((n=e==null?void 0:e.ids)==null?void 0:n.imdb)||((r=e==null?void 0:e.ids)==null?void 0:r.tmdb);return t?String(t):e!=null&&e.ratingKey?String(e.ratingKey):""}function ao(e,t){if(!e||!t)return;let n=`#/${e}/${t}`;try{if(history&&typeof history.pushState=="function"){location.hash===n&&typeof history.replaceState=="function"?history.replaceState(null,"",n):history.pushState(null,"",n);return}}catch{}try{window.__skipNextHashNavigation=!0}catch{}location.hash=n}function En(e){if(!e)return;let t=(e==null?void 0:e.type)==="tv"?"show":"movie",n=oo(e);n&&ao(t,n),t==="show"?ke(e):Ae(e)}var vt=$(()=>{J();Ke();Be();we();lt();bt()});var kt={};Ne(kt,{applyFilters:()=>be,computeFacets:()=>Et,initFilters:()=>At,renderFacets:()=>St,updateFiltersAndGrid:()=>xe});function kn(e){return String(e||"").toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"")}function so(e,t){let n=kn(t.query||""),r=!!t.onlyNew,o=Number(t.yearFrom)||null,a=Number(t.yearTo)||null,s=t.genres||new Set,i=t.collection||"";if(n&&!kn([e.title,e.originalTitle,e.summary,e.studio,re(e.genres).join(" "),(e.roles||[]).map(d=>d&&(d.tag||d.role||d.name)).join(" "),fe(e).join(" ")].filter(Boolean).join(" ")).includes(n)||r&&!he(e))return!1;let c=Number(L(e))||null;if(o&&(!c||c<o)||a&&(!c||c>a))return!1;if(s.size){let l=new Set(re(e.genres));for(let d of s)if(!l.has(d))return!1}return!(i&&!new Set(fe(e)).has(i))}function io(e,t){let n=e.slice();switch(t){case"year-desc":n.sort((r,o)=>(Number(L(o))||0)-(Number(L(r))||0)||String(r.title||"").localeCompare(String(o.title||""),"de"));break;case"year-asc":n.sort((r,o)=>(Number(L(r))||0)-(Number(L(o))||0)||String(r.title||"").localeCompare(String(o.title||""),"de"));break;case"title-desc":n.sort((r,o)=>String(o.title||"").localeCompare(String(r.title||""),"de"));break;case"added-desc":n.sort((r,o)=>new Date(o.addedAt||0)-new Date(r.addedAt||0));break;case"title-asc":default:n.sort((r,o)=>String(r.title||"").localeCompare(String(o.title||""),"de"))}return n}function Et(e,t){let n=new Set,r=new Set,o=new Set,a=i=>(i||[]).forEach(c=>{re(c.genres).forEach(d=>n.add(d));let l=c.year||(c.originallyAvailableAt?String(c.originallyAvailableAt).slice(0,4):"");l&&r.add(Number(l)),fe(c).forEach(d=>o.add(d))});a(e),a(t);let s=[...r].sort((i,c)=>i-c);return{genres:[...n].sort(),years:s,collections:[...o].sort((i,c)=>i.localeCompare(c,"de"))}}function St(e){let t=I("#yearFrom"),n=I("#yearTo");t&&t.replaceChildren(new Option("Ab Jahr",""),...e.years.map(a=>new Option(String(a),String(a)))),n&&n.replaceChildren(new Option("Bis Jahr",""),...e.years.map(a=>new Option(String(a),String(a))));let r=I("#collectionFilter");r&&r.replaceChildren(new Option("Alle Collections",""),...e.collections.map(a=>new Option(a,a)));let o=I("#genreFilters");if(o){let a=e.genres.map(s=>{let i=document.createElement("button");return i.type="button",i.className="chip",i.textContent=s,i.dataset.name=s,i});o.replaceChildren(...a),wt()}}function co(){var c,l,d,u,h;let e=document.getElementById("search")||document.getElementById("q"),t=((e==null?void 0:e.value)||"").trim(),n=((c=I("#onlyNew"))==null?void 0:c.checked)||!1,r=((l=I("#yearFrom"))==null?void 0:l.value)||"",o=((d=I("#yearTo"))==null?void 0:d.value)||"",a=((u=I("#collectionFilter"))==null?void 0:u.value)||"",s=((h=I("#sort"))==null?void 0:h.value)||"title-asc",i=new Set;return document.querySelectorAll("#genreFilters .chip.active").forEach(f=>i.add(f.dataset.name)),{query:t,onlyNew:n,yearFrom:r,yearTo:o,collection:a,genres:i,sort:s}}function be(){let e=E(),n=e.view==="shows"?e.shows:e.movies,r=co(),o=(n||[]).filter(s=>so(s,r)),a=io(o,r.sort);return ee({filtered:a}),a}function lo(){yt||(yt=Promise.resolve().then(()=>(vt(),An))),yt.then(e=>{let t=e&&e.renderGrid;typeof t=="function"&&t(E().view)}).catch(console.error)}function xe(){let e=be();return lo(),uo(e),e}function uo(e){try{let n={items:Array.isArray(e)?e.slice():[],view:E().view};window.dispatchEvent(new CustomEvent("filters:updated",{detail:n}))}catch{}}function wt(){let e=document.getElementById("genreFilters");if(!e)return;let t=e.querySelectorAll(".chip.active").length;e.dataset.state=t>0?"active":"empty",e.dataset.count=String(t)}function At(){let e=I("#sort");e&&e.options.length===0&&[["title-asc","Titel A\u2013Z"],["title-desc","Titel Z\u2013A"],["year-desc","Jahr \u2193"],["year-asc","Jahr \u2191"],["added-desc","Zuletzt hinzugef\xFCgt"]].forEach(([o,a])=>e.add(new Option(a,o)));let t=(o,a="input")=>{let s=I(o);s&&(s.addEventListener(a,()=>{xe()}),a==="input"&&s instanceof HTMLInputElement&&s.type==="search"&&s.addEventListener("search",()=>{xe()}))};t("#search"),t("#q"),t("#onlyNew","change"),t("#yearFrom","change"),t("#yearTo","change"),t("#collectionFilter","change"),t("#sort","change"),t("#groupCollections","change");let n=I("#yearReset");n&&n.addEventListener("click",()=>{let o=I("#yearFrom"),a=I("#yearTo");o&&(o.value=""),a&&(a.value=""),xe()});let r=I("#genreFilters");r&&(r.addEventListener("click",o=>{let a=o.target;a instanceof HTMLElement&&a.classList.contains("chip")&&(a.classList.toggle("active"),wt(),xe())}),wt())}var yt,Ke=$(()=>{J();Be();we();yt=null});var ye={};Ne(ye,{clearCache:()=>go,hydrateOptional:()=>Tt,validateToken:()=>Eo});function fo(){try{return new Map(JSON.parse(localStorage.getItem("tmdbCache")||"[]"))}catch{return new Map}}function ho(){try{localStorage.setItem("tmdbCache",JSON.stringify(Array.from(ie.entries())))}catch{}}function go(){try{localStorage.removeItem("tmdbCache"),ie=new Map}catch{}}function po(e){try{let t=localStorage.getItem("tmdbToken");if(t)return{kind:"bearer",value:t}}catch{}return e!=null&&e.tmdbApiKey?{kind:"apikey",value:String(e.tmdbApiKey)}:{kind:"none",value:""}}function mo(e){var s,i;let t=e.type==="tv"?"tv":"movie",n=((s=e==null?void 0:e.ids)==null?void 0:s.imdb)||"",r=((i=e==null?void 0:e.ids)==null?void 0:i.tmdb)||"",o=(e.title||"").toLowerCase(),a=String(e.year||"").slice(0,4);return[t,n,r,o,a].filter(Boolean).join("|")}function Ct(e,t){if(!t||t.kind==="none")return{url:e,init:{}};if(t.kind==="bearer")return{url:e,init:{headers:{Authorization:`Bearer ${t.value}`,Accept:"application/json"}}};let n=e.includes("?")?"&":"?";return{url:`${e}${n}api_key=${encodeURIComponent(t.value)}`,init:{headers:{Accept:"application/json"}}}}async function Oe(e,t){let{url:n,init:r}=Ct(e,t),o=await fetch(n,r);if(!o.ok)throw new Error("HTTP "+o.status);return o.json()}function bo(e){return e!=null&&e.file_path?ze+Cn+e.file_path:""}function vo(e){return e!=null&&e.file_path?ze+xn+e.file_path:""}async function xt(e,t,n,r){let o=await Oe(`${ve}/${e}/${t}?language=${encodeURIComponent(n||"de-DE")}`,r),a=await Oe(`${ve}/${e}/${t}/images`,r).catch(()=>({posters:[],backdrops:[]})),s=bo((a.posters||[])[0])||(o.poster_path?ze+Cn+o.poster_path:""),i=vo((a.backdrops||[])[0])||(o.backdrop_path?ze+xn+o.backdrop_path:"");return{id:o.id,poster:s,backdrop:i,url:`https://www.themoviedb.org/${e}/${o.id}`}}async function yo(e,t,n,r,o){let a=encodeURIComponent(t||""),s=n?`&year=${encodeURIComponent(String(n))}`:"",c=((await Oe(`${ve}/search/${e}?query=${a}${s}&language=${encodeURIComponent(r||"de-DE")}`,o)).results||[])[0];if(!c)throw new Error("not found");return xt(e,c.id,r,o)}async function wo(e,t,n){var s,i;let r=e.type==="tv"?"tv":"movie",o=mo(e);if(ie.has(o))return ie.get(o);let a;try{if((s=e==null?void 0:e.ids)!=null&&s.tmdb)a=await xt(r,e.ids.tmdb,t.lang,n);else if((i=e==null?void 0:e.ids)!=null&&i.imdb){let c=await Oe(`${ve}/find/${e.ids.imdb}?external_source=imdb_id&language=${encodeURIComponent(t.lang||"de-DE")}`,n),l=r==="movie"?(c.movie_results||[])[0]:(c.tv_results||[])[0];if(l)a=await xt(r,l.id,t.lang,n);else throw new Error("not found")}else a=await yo(r,e.title,e.year,t.lang,n)}catch{a=null}return ie.set(o,a),ho(),a}async function Tt(e,t,n={}){try{ie=ie||fo();let r=po(n);if(!r.value)return;let o=(e||[]).concat(t||[]),a=0,s=40,i=async()=>{let c=o.slice(a,a+4);a+=4,await Promise.all(c.map(async l=>{let d=await wo(l,n,r);d&&(l.tmdb={id:d.id,poster:d.poster,backdrop:d.backdrop,url:d.url},l.ids=l.ids||{},!l.ids.tmdb&&d.id&&(l.ids.tmdb=String(d.id)))}));try{window.dispatchEvent(new CustomEvent("tmdb:chunk",{detail:{updated:c.length,index:a}}))}catch{}if(a<Math.min(o.length,s))(window.requestIdleCallback||setTimeout)(i,250);else try{window.dispatchEvent(new CustomEvent("tmdb:done",{detail:{total:Math.min(o.length,s)}}))}catch{}};i()}catch{}}async function Eo(e){let t=String(e||"").trim();if(!t)throw new Error("empty");let n=/^[a-f0-9]{32}$/i.test(t),r=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+$/.test(t),o=a=>{try{let s=a.split(".")[1],c=atob((l=>l+"=".repeat((4-l.length%4)%4))(s.replace(/-/g,"+").replace(/_/g,"/")));return JSON.parse(c)}catch{return null}};if(n){let{url:a,init:s}=Ct(`${ve}/configuration`,{kind:"apikey",value:t});return(await fetch(a,s)).ok?{ok:!0,as:"apikey",hint:"v3Key"}:{ok:!1,as:"apikey",hint:"looksV3"}}if(r){let a=o(t);if(a&&typeof a=="object"){let c=String(a.iss||"");if(c&&!/themoviedb\.org/i.test(c))return{ok:!1,as:"bearer",hint:"issMismatch"}}let{url:s,init:i}=Ct(`${ve}/trending/movie/day`,{kind:"bearer",value:t});try{if((await fetch(s,i)).ok)return{ok:!0,as:"bearer",hint:null}}catch{}return{ok:!0,as:"bearer",hint:"structOnly"}}return{ok:!1,as:"bearer",hint:null}}var ve,ze,Cn,xn,ie,ce=$(()=>{ve="https://api.themoviedb.org/3",ze="https://image.tmdb.org/t/p/",Cn="w342",xn="w780"});J();Be();var K,Fe,Me,G;function Ye(){if(!K&&(K=I("#loaderOverlay"),!K)){K=k("div","loader-overlay"),K.id="loaderOverlay",K.hidden=!0;let e=k("div","loader");Me=k("div","msg",""),Fe=k("div","bar"),e.append(Me,Fe),K.append(e),document.body.append(K)}}function $t(){Ye(),K.hidden=!1}function le(e,t){Ye(),Me&&(Me.textContent=e||""),Fe&&(Fe.style.width=(t||0)+"%")}function _e(){Ye(),K.hidden=!0}function Dt(e=18){let t=I("#grid");if(t){G=k("div","skeleton");for(let n=0;n<e;n++)G.append(k("div","skel"));t.replaceChildren(G)}}function Xe(){G&&G.parentElement&&G.parentElement.removeChild(G),G=null}ue();Ke();vt();bt();ce();lt();J();ue();Qe();function In(){let e=document.getElementById("openDebug");e&&e.addEventListener("click",()=>{So()})}function So(){var t,n,r,o;let e=document.getElementById("debugOverlay");e||(e=document.createElement("div"),e.id="debugOverlay",e.className="debug-overlay",e.innerHTML=`
      <div class="debug-dialog">
        <div class="debug-header"><h2>Debug</h2></div>
        <div class="debug-body">
          <pre id="debugPre" class="debug-pre"></pre>
          <div class="debug-cache-controls">
            <h3>Cache-Verwaltung</h3>
            <div id="cacheStats" class="cache-stats"></div>
            <div class="cache-buttons">
              <button id="debugClearExpired" class="btn">Abgelaufene l\xF6schen</button>
              <button id="debugClearAll" class="btn">Alles l\xF6schen</button>
            </div>
          </div>
        </div>
        <div class="debug-actions">
          <button id="debugCopy" class="btn">Copy report</button>
          <button id="debugClose" class="btn">Schlie\xDFen</button>
        </div>
      </div>`,document.body.append(e)),e.hidden=!1,It(),e.addEventListener("click",a=>{a.target===e&&Tn()}),(t=document.getElementById("debugClose"))==null||t.addEventListener("click",Tn,{once:!0}),(n=document.getElementById("debugCopy"))==null||n.addEventListener("click",Ao,{once:!0}),(r=document.getElementById("debugClearExpired"))==null||r.addEventListener("click",()=>{$e(),It()},{once:!0}),(o=document.getElementById("debugClearAll"))==null||o.addEventListener("click",()=>{confirm("Wirklich den gesamten Cache l\xF6schen?")&&(Rt(),It())},{once:!0})}function Tn(){let e=document.getElementById("debugOverlay");e&&(e.hidden=!0)}function It(){let e=document.getElementById("debugPre");if(!e)return;let t=E(),n=Gt(),r=t.cfg||{},o=Ze(),a={view:t.view,counts:{movies:(t.movies||[]).length,shows:(t.shows||[]).length,filtered:(t.filtered||[]).length},dataSources:n,cache:o,tmdb:{enabled:!!r.tmdbEnabled,lang:r.lang,tokenPresent:!!(localStorage.getItem("tmdbToken")||r.tmdbApiKey)},useTmdbImages:localStorage.getItem("useTmdb")==="1",reduceMotion:localStorage.getItem("prefReduceMotion")==="1",locationHash:location.hash,userAgent:navigator.userAgent};e.textContent=JSON.stringify(a,null,2);let s=document.getElementById("cacheStats");s&&o&&(s.innerHTML=`
      <p>Eintr\xE4ge gesamt: <strong>${o.totalEntries}</strong></p>
      <p>G\xFCltig: <strong>${o.validEntries}</strong> | Abgelaufen: <strong>${o.expiredEntries}</strong></p>
      <p>Gr\xF6\xDFe: <strong>${o.totalSizeMB} MB</strong></p>
    `)}function Ao(){var n;let e=document.getElementById("debugPre");if(!e)return;let t=e.textContent||"";(n=navigator.clipboard)==null||n.writeText(t).catch(()=>{try{let r=document.createElement("textarea");r.value=t,document.body.append(r),r.select(),document.execCommand("copy"),r.remove()}catch{}})}we();var q=null;function Ue(){q||(q=document.createElement("div"),q.id="errorContainer",q.className="error-container",q.setAttribute("role","alert"),q.setAttribute("aria-live","polite"),document.body.appendChild(q)),window.addEventListener("unhandledrejection",e=>{var t;Ve("Ein unerwarteter Fehler ist aufgetreten",(t=e.reason)==null?void 0:t.message),e.preventDefault()}),window.addEventListener("error",e=>{var t;Ve("Ein Fehler ist aufgetreten",(t=e.error)==null?void 0:t.message)})}function Ve(e,t="",n=5e3){q||Ue();let r=document.createElement("div");return r.className="error-toast",r.innerHTML=`
    <div class="error-toast-content">
      <div class="error-toast-icon">\u26A0\uFE0F</div>
      <div class="error-toast-text">
        <div class="error-toast-title">${Lt(e)}</div>
        ${t?`<div class="error-toast-message">${Lt(t)}</div>`:""}
      </div>
      <button class="error-toast-close" aria-label="Schlie\xDFen">\xD7</button>
    </div>
  `,r.querySelector(".error-toast-close").addEventListener("click",()=>{r.classList.add("error-toast-exit"),setTimeout(()=>r.remove(),300)}),q.appendChild(r),n>0&&setTimeout(()=>{r.parentNode&&(r.classList.add("error-toast-exit"),setTimeout(()=>r.remove(),300))},n),requestAnimationFrame(()=>{r.classList.add("error-toast-show")}),r}function Ln(e,t){q||Ue();let n=document.createElement("div");n.className="error-toast error-toast-retryable",n.innerHTML=`
    <div class="error-toast-content">
      <div class="error-toast-icon">\u26A0\uFE0F</div>
      <div class="error-toast-text">
        <div class="error-toast-title">${Lt(e)}</div>
      </div>
      <button class="error-toast-retry">Erneut versuchen</button>
      <button class="error-toast-close" aria-label="Schlie\xDFen">\xD7</button>
    </div>
  `;let r=n.querySelector(".error-toast-retry"),o=n.querySelector(".error-toast-close");return r.addEventListener("click",async()=>{n.remove();try{await t()}catch{}}),o.addEventListener("click",()=>{n.classList.add("error-toast-exit"),setTimeout(()=>n.remove(),300)}),q.appendChild(n),requestAnimationFrame(()=>{n.classList.add("error-toast-show")}),n}function Lt(e){let t=document.createElement("div");return t.textContent=e,t.innerHTML}var Ie=null,U=null;function Te(e,t=!0){let n=document.getElementById("footerMeta");if(n){let o=n.querySelector("#footerStatus");o?o.textContent=e:n.textContent=e,n.dataset.state=t?"loading":"ready"}let r=document.getElementById("grid");r&&r.setAttribute("aria-busy",t?"true":"false")}async function Co(){Ue(),qo(),$t(),Te("Initialisiere \u2026",!0),le("Initialisiere \u2026",8),Dt(18);let e=await fetch("config.json").then(n=>n.json()).catch(n=>(Ve("Konfiguration konnte nicht geladen werden","Verwende Standardeinstellungen"),{startView:"movies",tmdbEnabled:!1}));ee({cfg:e,view:e.startView||"movies"});try{Te("Filme laden \u2026",!0),le("Filme laden \u2026",25);let n=await tt();Te("Serien laden \u2026",!0),le("Serien laden \u2026",45);let r=await nt();Te("Filter vorbereiten \u2026",!0),le("Filter vorbereiten \u2026",60);let o=Et(n,r);ee({movies:n,shows:r,facets:o}),Te("Ansicht aufbauen \u2026",!0),le("Ansicht aufbauen \u2026",85),Xe(),Ft(),St(o),At(),be(),xo(!0),P(E().view),To(),_e(),e.tmdbEnabled&&(window.requestIdleCallback||setTimeout)(()=>{var a;return(a=Tt)==null?void 0:a(n,r,e)},400),rn(),Ho(e),Ko(),zo(),Oo(),Vo(),Uo(),W(),In()}catch(n){throw _e(),Xe(),Ln("Fehler beim Laden der Daten",()=>window.location.reload()),n}let t;window.addEventListener("tmdb:chunk",()=>{t||(t=requestAnimationFrame(()=>{t=null;try{localStorage.getItem("useTmdb")==="1"&&(P(E().view),W())}catch{}}))}),window.addEventListener("tmdb:done",()=>{try{localStorage.getItem("useTmdb")==="1"&&(P(E().view),W())}catch{}})}var Nt=null,Bt="";window.addEventListener("hashchange",()=>{if(window.__skipNextHashNavigation){try{window.__skipNextHashNavigation=!1,Bt=location.hash||""}catch{}return}let e=location.hash||"";Nt&&clearTimeout(Nt),Nt=setTimeout(()=>{if(e===Bt)return;Bt=e;let t=e;if(/^#\/(movies|shows)$/.test(t)){let i=t.includes("shows")?"shows":"movies";ee({view:i});let c=be();Ft(),P(i),W(c);return}let n=t.match(/^#\/(movie|show)\/(.+)/);if(!n)return;let[,r,o]=n,s=((r==="movie"?E().movies:E().shows)||[]).find(i=>{var c,l;return((c=i==null?void 0:i.ids)==null?void 0:c.imdb)===o||((l=i==null?void 0:i.ids)==null?void 0:l.tmdb)===o||String(i==null?void 0:i.ratingKey)===o});s&&(r==="show"?ke(s):Ae(s))},50)});function Ft(){let e=document.getElementById("libraryTabs");if(!e)return;let t=Array.from(e.querySelectorAll("[data-lib]")),n=E().view==="shows"?"shows":"movies";t.forEach(r=>{let o=r.dataset.lib==="series"?"shows":"movies",a=n===o;r.classList.toggle("is-active",a),r.setAttribute("aria-pressed",a?"true":"false"),r.dataset.bound!=="true"&&(r.addEventListener("click",()=>{let s=r.dataset.lib==="series"?"shows":"movies";if(E().view===s)return;ee({view:s});try{window.__skipNextHashNavigation=!0}catch{}location.hash=s==="movies"?"#/movies":"#/shows",Ft();let i=be();P(s),W(i)}),r.dataset.bound="true")})}function xo(e=!1){let t=document.getElementById("heroStats");if(!t)return;let n=E(),r=(n.movies||[]).length,o=(n.shows||[]).length,a=t.querySelector('[data-stat="movies"]'),s=t.querySelector('[data-stat="shows"]');!a||!s||(e?(Nn(a,r),Nn(s,o)):(a.textContent=String(r),s.textContent=String(o)))}function Nn(e,t){if(!e)return;let n=Number(e.textContent)||0,r=Number(t)||0;if(n===r){e.textContent=String(r);return}let o=480,a=performance.now();function s(i){let c=Math.min(1,(i-a)/o),l=Math.round(n+(r-n)*(c<.5?2*c*c:-1+(4-2*c)*c));e.textContent=String(l),c<1?requestAnimationFrame(s):e.textContent=String(r)}requestAnimationFrame(s)}function To(){let e=document.getElementById("footerMeta");if(!e)return;let t=document.getElementById("footerStatus"),n=E(),r=n.movies||[],o=n.shows||[],a=r.concat(o).map(l=>new Date(l.addedAt||0).getTime()).filter(Number.isFinite),i=(a.length?new Date(Math.max(...a)):new Date).toISOString().slice(0,10);t&&(t.textContent=`Stand: ${i}`),e.dataset.state="ready";let c=document.getElementById("grid");c&&c.setAttribute("aria-busy","false")}function W(e){let t=document.getElementById("hero"),n=document.getElementById("heroTitle"),r=document.getElementById("heroSubtitle"),o=document.getElementById("heroCta");if(!t||!n||!r||!o)return;Io();let a=Lo(e);if(!a){Ie=null,n.textContent=U.title,r.textContent=U.subtitle,r.dataset.taglinePaused="0",delete r.dataset.heroBound,r.classList.remove("is-fading"),o.textContent=U.cta,o.disabled=!0,o.setAttribute("aria-disabled","true"),o.removeAttribute("aria-label"),o.onclick=null,t.style.backgroundImage="",t.classList.remove("has-poster"),t.dataset.heroKind="",t.dataset.heroId="";return}Ie=a;let s=a.type==="tv"?"show":"movie",i=Do(a);n.textContent=a.title||U.title,r.textContent=Bo(a),r.dataset.taglinePaused="1",r.dataset.heroBound="1",r.classList.remove("is-fading");let c=s==="show"?"Serien-Details \xF6ffnen":"Film-Details \xF6ffnen";o.textContent=c,o.disabled=!1,o.setAttribute("aria-disabled","false"),o.setAttribute("aria-label",a.title?`${c}: ${a.title}`:c),o.onclick=()=>Po(a,s,i),t.dataset.heroKind=s,t.dataset.heroId=i||"";let l=Ro(a);l?(t.style.backgroundImage=`url(${l})`,t.classList.add("has-poster")):(t.style.backgroundImage="",t.classList.remove("has-poster"))}window.__heroRefresh=W;function Io(){var e,t,n;U||(U={title:((e=document.getElementById("heroTitle"))==null?void 0:e.textContent)||"",subtitle:((t=document.getElementById("heroSubtitle"))==null?void 0:t.textContent)||"",cta:((n=document.getElementById("heroCta"))==null?void 0:n.textContent)||""})}function Lo(e){if(Array.isArray(e)){let r=e.filter(Fn);return r.length?Bn(r):null}let n=No().filter(Fn);return n.length?Bn(n):null}function Bn(e){if(e.length===1)return e[0];let t=Math.floor(Math.random()*e.length),n=e[t];return Ie&&e.length>1&&n===Ie&&e.find(o=>o!==Ie)||n}function No(){let e=E(),t=e.view==="shows"?"shows":"movies",r=(Array.isArray(e.filtered)&&e.filtered.length?e.filtered:null)||(t==="shows"?e.shows:e.movies)||[];return Array.isArray(r)?r:[]}function Fn(e){return!!e&&typeof e=="object"&&!e.isCollectionGroup&&e.type!=="collection"}function Bo(e){var i;let t=[],n=L(e);n&&t.push(String(n));let r=Fo(e);r&&t.push(r);let o=Number((i=e==null?void 0:e.rating)!=null?i:e==null?void 0:e.audienceRating);Number.isFinite(o)&&t.push(`\u2605 ${H(o)}`);let a=Mo(e,2);a.length&&t.push(a.join(", "));let s=_o(e);return s?t.length?`${t.join(" \u2022 ")} \u2014 ${s}`:s:t.length?t.join(" \u2022 "):(U==null?void 0:U.subtitle)||""}function Fo(e){var r,o;let t=(o=(r=e==null?void 0:e.runtimeMin)!=null?r:e==null?void 0:e.durationMin)!=null?o:e!=null&&e.duration?Math.round(Number(e.duration)/6e4):null,n=Number(t);return!Number.isFinite(n)||n<=0?"":(e==null?void 0:e.type)==="tv"?`~${n} min/Ep`:`${n} min`}function Mo(e,t=3){let n=Array.isArray(e==null?void 0:e.genres)?e.genres:[],r=[];return n.forEach(a=>{if(!a)return;if(typeof a=="string"){r.push(a);return}let s=a.tag||a.title||a.name||a.label||"";s&&r.push(s)}),Array.from(new Set(r)).slice(0,Math.max(0,t))}function _o(e){let t=[e==null?void 0:e.tagline,e==null?void 0:e.summary,e==null?void 0:e.plot,e==null?void 0:e.overview];for(let n of t){if(typeof n!="string")continue;let r=n.trim();if(r)return $o(r,220)}return""}function $o(e,t){let n=String(e||"").trim();return n?n.length<=t?n:`${n.slice(0,Math.max(0,t-1)).trimEnd()}\u2026`:""}function Do(e){var t,n;return e?(t=e==null?void 0:e.ids)!=null&&t.imdb?String(e.ids.imdb):(n=e==null?void 0:e.ids)!=null&&n.tmdb?String(e.ids.tmdb):(e==null?void 0:e.ratingKey)!=null?String(e.ratingKey):"":""}function Po(e,t,n){n&&jo(t,n),t==="show"?ke(e):Ae(e)}function jo(e,t){if(!e||!t)return;let n=`#/${e}/${t}`;try{if(history&&typeof history.pushState=="function"){location.hash===n&&typeof history.replaceState=="function"?history.replaceState(null,"",n):history.pushState(null,"",n);return}}catch{}try{window.__skipNextHashNavigation=!0}catch{}location.hash=n}function Ro(e){var a,s,i,c,l;if(!e)return"";let t=oe(),n=[(a=e==null?void 0:e.tmdb)==null?void 0:a.backdrop,(s=e==null?void 0:e.tmdb)==null?void 0:s.backdrop_path,(i=e==null?void 0:e.tmdb)==null?void 0:i.backdropPath,(c=e==null?void 0:e.tmdb)==null?void 0:c.background,(l=e==null?void 0:e.tmdb)==null?void 0:l.art],r=[e==null?void 0:e.art,e==null?void 0:e.background,e==null?void 0:e.thumbBackground,e==null?void 0:e.coverArt,e==null?void 0:e.thumb,e==null?void 0:e.thumbFile];if(t){let d=n.find(Mn);if(d)return d}return r.find(Mn)||""}function Mn(e){return typeof e=="string"&&e.trim().length>0}window.addEventListener("filters:updated",e=>{let t=e==null?void 0:e.detail,n=Array.isArray(t==null?void 0:t.items)?t.items:null;W(n)});Co();window.addEventListener("load",()=>{try{_e()}catch{}});function Ho(e){let t=document.getElementById("settingsOverlay"),n=t==null?void 0:t.querySelector(".settings-dialog"),r=document.getElementById("settingsBtn"),o=document.getElementById("openSettings"),a=document.getElementById("headerSettingsBtn"),s=document.getElementById("settingsClose2"),i=document.getElementById("tmdbTokenInput"),c=document.getElementById("tmdbSave"),l=document.getElementById("tmdbTest"),d=document.getElementById("tmdbStatus"),u=document.getElementById("tmdbClearCache"),h=document.getElementById("tmdbStatusBadge"),f=document.getElementById("prefReduceMotion"),m=document.getElementById("useTmdbSetting"),v=document.getElementById("resetFilters");t&&t.hidden&&t.setAttribute("aria-hidden","true");let A=null,C="",_=!1,j=new Map,Q='a[href], button:not([disabled]), input:not([disabled]), select:not([disabled]), textarea:not([disabled]), [tabindex]:not([tabindex="-1"])';function Le(){return t?Array.from(t.querySelectorAll(Q)).filter(g=>!g.hasAttribute("disabled")&&g.getAttribute("aria-hidden")!=="true"):[]}function y(){n&&typeof n.focus=="function"?n.focus({preventScroll:!0}):t&&typeof t.focus=="function"&&t.focus({preventScroll:!0})}function T(g){if(!t)return;let S=Array.from(document.body.children).filter(p=>p!==t);g?S.forEach(p=>{j.has(p)||j.set(p,{ariaHidden:p.hasAttribute("aria-hidden")?p.getAttribute("aria-hidden"):null,inert:p.hasAttribute("inert")}),p.setAttribute("aria-hidden","true"),p.setAttribute("inert","")}):(S.forEach(p=>{let b=j.get(p);b?(b.ariaHidden===null||b.ariaHidden===void 0?p.removeAttribute("aria-hidden"):p.setAttribute("aria-hidden",b.ariaHidden),b.inert?p.setAttribute("inert",""):p.removeAttribute("inert"),j.delete(p)):(p.removeAttribute("aria-hidden"),p.removeAttribute("inert"))}),j.clear())}function x(){!t||_||(_=!0,t.hidden=!1,t.setAttribute("aria-hidden","false"),A=document.activeElement instanceof HTMLElement?document.activeElement:null,C=document.body.style.overflow,document.body.style.overflow="hidden",T(!0),_n(),requestAnimationFrame(y))}function F(){!t||!_||(_=!1,t.hidden=!0,t.setAttribute("aria-hidden","true"),T(!1),document.body.style.overflow=C,A&&typeof A.focus=="function"&&A.focus(),A=null)}function B(g){if(!_)return;if(g.key==="Escape"){g.preventDefault(),F();return}if(g.key!=="Tab")return;let S=Le();if(!S.length){g.preventDefault(),y();return}let p=S[0],b=S[S.length-1],O=document.activeElement;g.shiftKey?(O===p||!t.contains(O))&&(g.preventDefault(),b.focus()):O===b&&(g.preventDefault(),p.focus())}r&&r.addEventListener("click",x),o&&o.addEventListener("click",()=>{x()}),a&&a.addEventListener("click",x),s&&s.addEventListener("click",F),t&&t.addEventListener("click",g=>{g.target===t&&F()}),t&&t.addEventListener("keydown",B);function w(g="",S=""){if(d){d.textContent=g,d.dataset.kind=S,h&&(h.dataset.kind=S||"",h.title=g||"");try{if(S==="error"&&e&&e.tmdbApiKey){let p=String(localStorage.getItem("tmdbToken")||"").trim(),b=String((i==null?void 0:i.value)||"").trim();if(p&&b){try{localStorage.removeItem("tmdbToken")}catch{}i&&(i.value=""),M(!0);let O="Ung\xFCltiger Token entfernt. Verwende API Key aus config.json.";d.textContent=O,d.dataset.kind="info",h&&(h.dataset.kind="info",h.title=O)}}}catch{}}}function M(g){if(m&&(m.disabled=!g,m.title=m.disabled?"Nur verf\xFCgbar mit g\xFCltigem Token oder API Key.":"",!g&&m.checked)){try{localStorage.setItem("useTmdb","0")}catch{}m.checked=!1,P(E().view)}}function _n(){let g="";try{i&&(i.value=g=localStorage.getItem("tmdbToken")||"")}catch{}try{f&&(f.checked=localStorage.getItem("prefReduceMotion")==="1")}catch{}try{m&&(m.checked=localStorage.getItem("useTmdb")==="1",m.disabled=!g,m.title=m.disabled?"Nur verf\xFCgbar mit g\xFCltigem Token.":"")}catch{}try{M(!!g||!!(e&&e.tmdbApiKey))}catch{}w("",""),g||w("Kein Token hinterlegt. TMDB ist deaktiviert.","info"),e!=null&&e.tmdbEnabled||w("Hinweis: TMDB in config.json deaktiviert (tmdbEnabled=false).","info"),g?(async()=>{var S;w("Pr\xFCfe Token...","pending");try{let p=await Promise.resolve().then(()=>(ce(),ye)),b=await((S=p.validateToken)==null?void 0:S.call(p,g));b&&b.ok?(M(!0),b.as==="bearer"?w("Token g\xFCltig (v4 Bearer).","success"):b.as==="apikey"&&w('API Key g\xFCltig (v3). Tipp: dauerhaft in site/config.json unter "tmdbApiKey" eintragen.',"success")):(M(!1),(b==null?void 0:b.hint)==="looksV3"?w('Eingegebener Wert sieht wie ein v3 API Key aus. Bitte in config.json als "tmdbApiKey" eintragen oder v4 Bearer Token verwenden.',"error"):w("Token ung\xFCltig oder keine Berechtigung (401).","error"))}catch{w("Pr\xFCfung fehlgeschlagen. Netzwerk/Browser-Konsole pr\xFCfen.","error")}})():M(!!(e&&e.tmdbApiKey))}c&&c.addEventListener("click",async()=>{var S;let g=String((i==null?void 0:i.value)||"").trim();try{localStorage.setItem("tmdbToken",g)}catch{}if(!g){w("Kein Token hinterlegt. TMDB ist deaktiviert.","info"),M(!!(e&&e.tmdbApiKey));return}w("Pr\xFCfe Token...","pending");try{let p=await Promise.resolve().then(()=>(ce(),ye)),b=await((S=p.validateToken)==null?void 0:S.call(p,g));b&&b.ok?(M(!0),b.as==="bearer"?w("Token g\xFCltig (v4 Bearer).","success"):b.as==="apikey"&&w('API Key g\xFCltig (v3). Tipp: dauerhaft in site/config.json unter "tmdbApiKey" eintragen.',"success")):(M(!1),(b==null?void 0:b.hint)==="looksV3"?w('Eingegebener Wert sieht wie ein v3 API Key aus. Bitte in config.json als "tmdbApiKey" eintragen oder v4 Bearer Token verwenden.',"error"):w("Token ung\xFCltig oder keine Berechtigung (401).","error"))}catch{w("Pr\xFCfung fehlgeschlagen. Netzwerk/Browser-Konsole pr\xFCfen.","error")}}),l&&l.addEventListener("click",async()=>{var S;let g=String((i==null?void 0:i.value)||"").trim();if(!g){w("Bitte Token eingeben.","error");return}w("Pr\xFCfe Token...","pending");try{let p=await Promise.resolve().then(()=>(ce(),ye)),b=await((S=p.validateToken)==null?void 0:S.call(p,g));b&&b.ok?b.as==="bearer"?w("Token g\xFCltig (v4 Bearer).","success"):b.as==="apikey"&&w('API Key g\xFCltig (v3). Tipp: dauerhaft in site/config.json unter "tmdbApiKey" eintragen.',"success"):(b==null?void 0:b.hint)==="looksV3"?w('Eingegebener Wert sieht wie ein v3 API Key aus. Dieser funktioniert hier nicht als Bearer. Bitte in config.json als "tmdbApiKey" eintragen oder v4 Bearer Token verwenden.',"error"):w("Token ung\xFCltig oder keine Berechtigung (401).","error")}catch{w("Pr\xFCfung fehlgeschlagen. Netzwerk/Browser-Konsole pr\xFCfen.","error")}}),u&&u.addEventListener("click",()=>{Promise.resolve().then(()=>(ce(),ye)).then(g=>{var S;return(S=g.clearCache)==null?void 0:S.call(g)})}),f&&f.addEventListener("change",()=>{try{localStorage.setItem("prefReduceMotion",f.checked?"1":"0")}catch{}Mt(f.checked)}),m&&m.addEventListener("change",()=>{try{localStorage.setItem("useTmdb",m.checked?"1":"0")}catch{}m.checked&&!window.__tmdbHydrationStarted&&(window.__tmdbHydrationStarted=1,Promise.resolve().then(()=>(ce(),ye)).then(g=>{var p;let S=E();(p=g.hydrateOptional)==null||p.call(g,S.movies,S.shows,S.cfg)}).catch(()=>{}),setTimeout(()=>{m.checked&&P(E().view)},1200),setTimeout(()=>{m.checked&&P(E().view)},3e3)),P(E().view),W()}),v&&v.addEventListener("click",()=>{let g=document.getElementById("search");g&&(g.value="");let S=document.getElementById("q");S&&(S.value="");let p=document.getElementById("onlyNew");p&&(p.checked=!1);let b=document.getElementById("yearFrom"),O=document.getElementById("yearTo");b&&(b.value=""),O&&(O.value="");let _t=document.getElementById("collectionFilter");_t&&(_t.value=""),document.querySelectorAll("#genreFilters .chip.active").forEach(Je=>Je.classList.remove("active"));let We=document.getElementById("genreFilters");We&&(We.dataset.state="empty",We.dataset.count="0"),Promise.resolve().then(()=>(Ke(),kt)).then(Je=>{let $n=Je.applyFilters();P(E().view),W($n)})})}function Mt(e){var t,n;try{let r=document.body;r?((t=document.documentElement)==null||t.classList.remove("reduce-motion","reduced-motion"),r.classList.remove("reduced-motion"),r.classList.toggle("reduce-motion",e)):((n=document.documentElement)==null||n.classList.toggle("reduce-motion",e),window.addEventListener("DOMContentLoaded",()=>Mt(e),{once:!0}))}catch{}}function qo(){try{let e=localStorage.getItem("prefReduceMotion")==="1";Mt(e)}catch{}}function Ko(){let e=document.getElementById("toggleAdvanced"),t=document.getElementById("advancedFilters");if(!e||!t)return;let n=!1,r=0,o=()=>{n=!1,r&&(clearTimeout(r),r=0),t.dataset.state==="closing"?(t.dataset.state="closed",t.hidden=!0,t.style.removeProperty("--advanced-max")):t.dataset.state==="open"?t.style.removeProperty("--advanced-max"):t.dataset.state==="expanding"&&(t.dataset.state="open",t.style.removeProperty("--advanced-max"))},a=()=>{r&&clearTimeout(r),r=window.setTimeout(o,320)};t.addEventListener("transitionend",c=>{c.target!==t||c.propertyName!=="max-height"||o()});let s=()=>{n||(n=!0,t.hidden=!1,t.dataset.state="expanding",t.setAttribute("aria-hidden","false"),t.style.setProperty("--advanced-max","0px"),requestAnimationFrame(()=>{let c=t.scrollHeight;t.style.setProperty("--advanced-max",c+"px"),t.dataset.state="open",a()}))},i=()=>{if(n)return;n=!0;let c=t.scrollHeight;t.style.setProperty("--advanced-max",c+"px"),t.dataset.state="closing",t.setAttribute("aria-hidden","true"),requestAnimationFrame(()=>{t.style.setProperty("--advanced-max","0px"),a()})};e.addEventListener("click",()=>{e.getAttribute("aria-expanded")==="true"?(e.setAttribute("aria-expanded","false"),i()):(e.setAttribute("aria-expanded","true"),s())})}function zo(){let e=document.getElementById("siteLogo");e&&e.addEventListener("error",()=>{e.classList.add("logo-missing");let a=document.querySelector(".site-header__brand-text .site-header__label");a&&a.classList.remove("sr-only")});let t=document.getElementById("heroSubtitle"),n=["Offline st\xF6bern & Wunschlisten teilen","Filter. Finden. Freuen.","Filme & Serien \u2013 stressfrei sichtbar","Schneller als jeder SMB-Share","Merkliste zuerst, Streit sp\xE4ter"],r=0;t&&(t.textContent=n[r]);function o(){!t||t.dataset.taglinePaused==="1"||(t.classList.add("is-fading"),setTimeout(()=>{if(!t||t.dataset.taglinePaused==="1"){t&&t.classList.remove("is-fading");return}r=(r+1)%n.length,t.textContent=n[r],t.classList.remove("is-fading")},280))}t&&(t.dataset.taglinePaused="0",window.__taglineTicker||(window.__taglineTicker=setInterval(o,6e3),setTimeout(o,3e3)))}function Oo(){let e=document.getElementById("scrollProgress");if(!e)return;let t=()=>{let n=document.documentElement.scrollTop||document.body.scrollTop||0,r=document.documentElement.scrollHeight-document.documentElement.clientHeight||1,o=Math.max(0,Math.min(100,n/r*100));e.style.width=o+"%"};addEventListener("scroll",t,{passive:!0}),t()}function Vo(){let e=document.getElementById("scrollTop");if(!e)return;let t=()=>{let n=window.scrollY||0;e.style.display=n>300?"block":"none"};addEventListener("scroll",t,{passive:!0}),t(),e.addEventListener("click",()=>window.scrollTo({top:0,behavior:"smooth"}))}function Uo(){let e=document.querySelector(".filters");if(!e||typeof CSS!="undefined"&&typeof CSS.supports=="function"&&CSS.supports("animation-timeline: scroll()"))return;let n=window.scrollY||window.pageYOffset||0,r=!1,o=!1,a=120,s=8,i=u=>{r!==u&&(r=u,e.classList.toggle("is-hidden",r))},c=()=>{o=!1;let u=window.scrollY||window.pageYOffset||0;if(u<=a){i(!1),n=u;return}let h=u-n;n=u,h>s?i(!0):h<-s&&i(!1)},l=()=>{o||(o=!0,requestAnimationFrame(c))};window.addEventListener("scroll",l,{passive:!0}),window.addEventListener("resize",c);let d=()=>i(!1);e.addEventListener("focusin",d),e.addEventListener("pointerenter",d,{passive:!0}),e.addEventListener("pointerdown",d,{passive:!0}),c()}
//# sourceMappingURL=main.js.map
