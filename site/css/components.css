.field{display:flex;align-items:center;gap:8px;transition:border-color .15s ease,box-shadow .15s ease}
.field .icon{flex:0 0 auto;display:inline-flex;align-items:center;justify-content:center;width:var(--field-icon-size,clamp(28px,2.8vw+16px,36px));height:var(--field-icon-size,clamp(28px,2.8vw+16px,36px));border-radius:10px;background:rgba(20,26,36,.78);border:1px solid var(--border);color:rgba(207,225,255,.88);font-size:0;line-height:0;transition:background .15s ease,border-color .15s ease,color .15s ease,box-shadow .15s ease}
.field.search:hover,.field.search:focus-within,.field.sort:hover,.field.sort:focus-within,.field.chips:hover,.field.chips:focus-within,.field.collections:hover,.field.collections:focus-within,.field.year:hover,.field.year:focus-within{border-color:rgba(106,166,255,.6);box-shadow:0 0 0 1px rgba(106,166,255,.24)}
.field.search:hover .icon,.field.search:focus-within .icon,.field.sort:hover .icon,.field.sort:focus-within .icon,.field.chips:hover .icon,.field.chips:focus-within .icon,.field.collections:hover .icon,.field.collections:focus-within .icon,.field.year:hover .icon,.field.year:focus-within .icon{border-color:rgba(106,166,255,.6);background:rgba(106,166,255,.12);color:var(--accent);box-shadow:0 0 0 1px rgba(106,166,255,.24)}
.field .icon svg{width:18px;height:18px;display:block;stroke-width:1.75;stroke:currentColor;fill:none;stroke-linecap:round;stroke-linejoin:round}
.field.search{flex:1 1 240px;background:rgba(15,18,23,0.92);border:1px solid var(--border);border-radius:12px;padding:6px 10px}
.field.search input{flex:1;background:transparent;border:none;color:var(--fg);outline:none}
.chip-group{display:flex;flex-wrap:wrap;gap:6px}
.field.toggles{flex-wrap:wrap}
.toggle-chip{position:relative;display:inline-flex;align-items:center;font-size:14px;line-height:1.2}
.toggle-chip input{position:absolute;opacity:0;pointer-events:none}
.toggle-chip span{display:inline-flex;align-items:center;gap:6px;padding:6px 12px;border-radius:999px;border:1px solid var(--border);background:var(--card);color:var(--fg);transition:background .15s ease,border-color .15s ease,color .15s ease,box-shadow .15s ease}
.toggle-chip:focus-within span{border-color:rgba(106,166,255,.6);box-shadow:0 0 0 2px rgba(106,166,255,.3)}
.toggle-chip input:checked+span{background:rgba(106,166,255,.18);border-color:rgba(106,166,255,.6);color:var(--accent)}
.chip{display:inline-flex;align-items:center;gap:6px;background:var(--chip);border:1px solid var(--border);color:var(--fg);border-radius:999px;padding:6px 10px;font-size:13px}
.chip.more{cursor:pointer;opacity:.9}
.btn{display:inline-flex;align-items:center;gap:6px;border:1px solid var(--border);background:var(--card);color:var(--fg);padding:8px 12px;border-radius:10px}
.primary{display:inline-flex;align-items:center;gap:6px;padding:8px 12px;border-radius:10px;font-weight:600;letter-spacing:.2px;border:1px solid transparent}
.watchlist-button{border:1px solid var(--border);background:var(--card);color:var(--fg);padding:8px 12px;border-radius:999px}

.card{background:var(--card);border:1px solid var(--border);border-radius:10px;overflow:hidden}
.card{transition:transform .18s ease, box-shadow .18s ease}
.card:hover{transform:translateY(-2px); box-shadow:0 8px 20px rgba(0,0,0,.25)}
.card .poster{width:100%;aspect-ratio:2/3;background:#0e1217}
.card .poster img{display:block;width:100%;height:100%;object-fit:cover}
.card .meta{padding:8px}
.card .title{font-weight:600;margin-bottom:2px}
.card .sub{opacity:.85;font-size:.9em;margin-bottom:6px}
.card .card-actions{display:flex;gap:8px;margin-top:6px}
.watch-btn{border:1px solid var(--border);background:#151a22;color:var(--fg);padding:6px 10px;border-radius:8px;font-size:13px}
.watch-btn.active{background:#1d2a3e;border-color:#2a3a52}
.card.collection .poster{aspect-ratio:16/9}

.toggle-advanced,.settings-button,.btn,.watch-btn,.primary{transition:background .15s ease,border-color .15s ease,color .15s ease,box-shadow .15s ease}
.btn:hover,.settings-button:hover,.toggle-advanced:hover{border-color:rgba(106,166,255,.6);color:var(--accent);background:rgba(106,166,255,.12)}
.primary,.btn.primary{background:linear-gradient(135deg,#6aa6ff,#4f8df7);border-color:rgba(88,142,235,.9);color:#0b1524;box-shadow:0 10px 28px rgba(36,86,158,.28)}
.primary:hover,.btn.primary:hover{background:linear-gradient(135deg,#78b3ff,#5a96ff);border-color:rgba(120,176,255,.95);color:#061426;box-shadow:0 12px 30px rgba(52,104,180,.34)}
.primary:active,.btn.primary:active{background:linear-gradient(135deg,#4f8df7,#3f76d6);border-color:rgba(70,122,214,.92);box-shadow:0 8px 22px rgba(30,72,144,.38);transform:translateY(1px)}
.primary:focus-visible,.btn.primary:focus-visible{outline:none;box-shadow:0 0 0 2px rgba(12,26,48,.72),0 0 0 5px rgba(106,166,255,.38),0 10px 28px rgba(36,86,158,.28)}
.primary:disabled,.btn.primary:disabled,.primary.is-disabled,.btn.primary.is-disabled{background:linear-gradient(135deg,rgba(106,166,255,.32),rgba(79,141,247,.28));border-color:rgba(88,142,235,.35);color:rgba(11,21,36,.65);box-shadow:none;cursor:not-allowed;opacity:.7}
.badge{background:#1a2230;border:1px solid var(--border);border-radius:6px;padding:2px 6px;font-size:12px}
.chips{ display:flex; flex-wrap:wrap; gap: 6px }
.chips .chip{ background:#162033; border:1px solid #24314a; color:#cfe1ff; border-radius:999px; padding:.25rem .6rem }
.chips .chip.more{ background:transparent; border-style:dashed; border-color:#2a3a56; color:var(--accent); cursor:pointer }

.settings-overlay{position:fixed;inset:0;z-index:20;display:flex;align-items:center;justify-content:center;background:rgba(0,0,0,0.45)}
.settings-overlay[hidden]{display:none}
.settings-dialog{background:var(--card);border:1px solid var(--border);border-radius:12px;max-width:720px;width:calc(100% - 24px);padding:12px;box-shadow:0 10px 30px rgba(0,0,0,.5)}
.settings-header{padding:8px 8px 0}
.settings-title{margin:0}
.settings-body{display:flex;flex-direction:column;gap:12px;padding:8px}
.settings-row{display:flex;flex-direction:column;gap:8px}
.settings-inline{display:flex;gap:8px;flex-wrap:wrap}
.settings-actions{display:flex;justify-content:flex-end;gap:8px;padding:8px}
.settings-help{opacity:.8;font-size:.9em}
.settings-row fieldset{border:none;margin:0;padding:0;display:flex;flex-direction:column;gap:8px}
.settings-row fieldset legend{font-weight:600;margin-bottom:4px}
.settings-row fieldset .settings-inline label{display:flex;align-items:center;gap:6px;font-weight:500}
.settings-row fieldset .settings-inline input[type=radio]{accent-color:var(--accent,#6aa6ff)}

.watchlist-panel{background:rgba(15,18,23,0.85);border-top:1px solid var(--border);padding:12px 16px}
.watchlist-header{display:flex;align-items:center;justify-content:space-between;gap:8px}
.watchlist-items{list-style:none;padding:0;margin:10px 0;display:flex;flex-direction:column;gap:6px}
.watchlist-item{display:flex;align-items:center;gap:8px}
.watchlist-item .title{flex:1}

/* Debug overlay */
.debug-overlay{position:fixed;inset:0;z-index:30;display:flex;align-items:center;justify-content:center;background:rgba(0,0,0,0.5)}
.debug-overlay[hidden]{display:none}
.debug-dialog{background:var(--card);border:1px solid var(--border);border-radius:12px;max-width:900px;width:calc(100% - 24px);max-height:90vh;display:flex;flex-direction:column;overflow:auto}
.debug-header{padding:10px 12px;border-bottom:1px solid var(--border)}
.debug-body{padding:10px 12px}
.debug-pre{margin:0;white-space:pre;overflow:auto;max-height:60vh}
.debug-actions{display:flex;justify-content:flex-end;gap:8px;padding:10px 12px;border-top:1px solid var(--border)}
